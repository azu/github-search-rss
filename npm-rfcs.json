{
    "version": "https://jsonfeed.org/version/1",
    "title": "npm/rfcs Issues",
    "home_page_url": "https://azu.github.io/github-search-rss/npm-rfcs.json",
    "feed_url": "https://azu.github.io/github-search-rss/npm-rfcs.json",
    "description": "npm/rfcs Issues on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1812093?u=0d6a92ea991be8b4d893c64f017d10b26d60e581&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">The motivations behind this is that it seems natural to me, even if a bit niche, and scripts defined like this are the cleanest possibly way to write them that I can think of:</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"{\n  &quot;name&quot;: &quot;pkg&quot;,\n  &quot;bin&quot;: &quot;./src/index.js&quot;,\n  &quot;scripts&quot;: {\n     &quot;something&quot;: &quot;pkg something&quot;\n  }\n}\"><pre class=\"notranslate\">{\n  <span class=\"pl-ent\">\"name\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>pkg<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"bin\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>./src/index.js<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"scripts\"</span>: {\n     <span class=\"pl-ent\">\"something\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>pkg something<span class=\"pl-pds\">\"</span></span>\n  }\n}</pre></div>\n<p dir=\"auto\">Notice how the <code class=\"notranslate\">something</code> script inside <code class=\"notranslate\">pkg</code> references the <code class=\"notranslate\">pkg</code> bin, i.e. itself.</p>\n<h3 dir=\"auto\">Example</h3>\n<p dir=\"auto\">See above.</p>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n<p dir=\"auto\">Currently running an <code class=\"notranslate\">npm run something</code> leads to an error saying that <code class=\"notranslate\">pkg</code> has not been found.</p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n\n<p dir=\"auto\"><code class=\"notranslate\">npm run</code> should take into consideration the binaries defined by the current package, and consider them as available binaries too.</p>\n<h3 dir=\"auto\">References</h3>\n\n<ul dir=\"auto\">\n<li>Original npm/cli issue: <a aria-label=\"Issue #6141\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1574587794\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/cli/issues/6141\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/cli/issues/6141/hovercard\" href=\"https://github.com/npm/cli/issues/6141\">npm/cli#6141</a></li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/673",
            "title": "[RRFC] Ensure that binaries defined by the current package are recognized as available binaries inside itself by npm run",
            "date_modified": "2023-02-07T16:59:56.000Z",
            "date_published": "2023-02-07T16:17:20.000Z",
            "author": {
                "name": "fabiospampinato",
                "url": "https://github.com/fabiospampinato"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/9287?u=6562b30a846303afd5d00d17e47af7653a112437&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">Sometimes an optional transitive dependency may have a security advisory against it, and there may be no way to fix it.</p>\n<p dir=\"auto\">For example:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ npm i express-prometheus-middleware@1.2.0\n\nadded 69 packages, and audited 136 packages in 3s\n\n7 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (3 high, 2 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\n$ npm audit fix\n\nup to date, audited 136 packages in 565ms\n\n7 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (3 high, 2 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\n# oof\n\n# but! check this out!\n\n$ npm i express-prometheus-middleware --omit=optional\n\nadded 65 packages, and audited 66 packages in 460ms\n\n7 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\"><pre class=\"notranslate\"><code class=\"notranslate\">$ npm i express-prometheus-middleware@1.2.0\n\nadded 69 packages, and audited 136 packages in 3s\n\n7 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (3 high, 2 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\n$ npm audit fix\n\nup to date, audited 136 packages in 565ms\n\n7 packages are looking for funding\n  run `npm fund` for details\n\n5 vulnerabilities (3 high, 2 critical)\n\nTo address all issues, run:\n  npm audit fix\n\nRun `npm audit` for details.\n\n# oof\n\n# but! check this out!\n\n$ npm i express-prometheus-middleware --omit=optional\n\nadded 65 packages, and audited 66 packages in 460ms\n\n7 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n</code></pre></div>\n<h3 dir=\"auto\">Example</h3>\n\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n\n<h4 dir=\"auto\">Desired Behavior</h4>\n\n<h3 dir=\"auto\">References</h3>\n\n<ul dir=\"auto\">\n<li>n/a</li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/672",
            "title": "[RRFC] `npm audit fix` should remove optional deps if necessary",
            "date_modified": "2023-01-29T16:18:13.000Z",
            "date_published": "2023-01-25T20:03:54.000Z",
            "author": {
                "name": "isaacs",
                "url": "https://github.com/isaacs"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/424045?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n\n<p dir=\"auto\">The npm CLI often has a desire to get new features and/or changes to underlying systems into the hands of users without waiting for a new semver-major to represent the potential for breakage in those changes.</p>\n<p dir=\"auto\">In order to ship these things with minimal disruption, we would like to introduce a means of opting in to experimental features and behaviors. This functionality should work such that when the feature/behavior is no longer experimental, the presence of the flag does not create an error. This is important because our future config changes may lead us to throwing errors for unknown command line flags, which is undesirable here.</p>\n<h3 dir=\"auto\">Example</h3>\n\n<p dir=\"auto\">As an initial example, we are working toward removing our existing HTTP agent implementation with a <a href=\"https://github.com/npm/agent\">new in-house agent</a> that better covers our use cases with regards to socket limitations, proxy usage, and timeouts. In <em>theory</em> this change should not be breaking, and ideally will not be, however due to a lack of visibility into the various configurations of our community we cannot ship it with full confidence that we won't break any workflows.</p>\n<p dir=\"auto\">In order to get this new agent into our community's hands for testing purpose, we would like to gate it behind this new experimental feature flag. This will allow us to test thoroughly, especially with our users who are currently experiencing problems that should be resolved by this change, <em>before</em> it becomes the new default (or in some cases the only option).</p>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n\n<p dir=\"auto\">We don't have a means of doing these feature flags today. Some things are configurable, however when we set new defaults or change existing behaviors in ways that we have low confidence will not be breaking we are forced to wait for our next semver-major release to ship the change as breaking and deal with bugs after the fact. This delays our feedback cycle, and leaves our community with potentially broken features for a potentially extended length of time.</p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n\n<p dir=\"auto\">Users should be able to opt-in to these experimental changes with a command line flag. Current thinking is something like the following:</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&gt; npm install --experimental=agent # only experimental http agent enabled\n&gt; npm install --experimental       # all experiments enabled\"><pre class=\"notranslate\"><span class=\"pl-k\">&gt;</span> npm install --experimental=agent <span class=\"pl-c\"><span class=\"pl-c\">#</span> only experimental http agent enabled</span>\n<span class=\"pl-k\">&gt;</span> npm install --experimental       <span class=\"pl-c\"><span class=\"pl-c\">#</span> all experiments enabled</span></pre></div>\n<p dir=\"auto\">The important parts of this being the ability to turn on all experiments, or to turn on only those the user wishes.</p>\n<p dir=\"auto\">When a feature/behavior is no longer experimental, it will be removed from the list of available experiments and it will be ignored. This means that users who do something like use a shell alias or an npm script to run <code class=\"notranslate\">npm i --experimental=agent</code> will not be presented with errors when the agent becomes the new default.</p>",
            "url": "https://github.com/npm/rfcs/issues/667",
            "title": "[RRFC] mechanism for opting in to experimental changes",
            "date_modified": "2023-01-06T00:21:02.000Z",
            "date_published": "2023-01-05T20:10:55.000Z",
            "author": {
                "name": "nlf",
                "url": "https://github.com/nlf"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1005638?u=bfbe0a4981cae46d5a0cf3a0e24a4ac04abe7421&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n\n<p dir=\"auto\">Many npm packages contain invalid ESM, which makes Node.js choke.</p>\n<p dir=\"auto\">The situation is quite bad, as described in <a aria-label=\"Issue #46074\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1517510279\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/46074\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/46074/hovercard\" href=\"https://github.com/nodejs/node/issues/46074\">nodejs/node#46074</a>.</p>\n<h3 dir=\"auto\">Example</h3>\n\n<p dir=\"auto\">For example, the npm package <code class=\"notranslate\">@aws-amplify/ui-react</code> contains invalid ESM, see <a aria-label=\"Issue #3155\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1488517976\" data-permission-text=\"Title is private\" data-url=\"https://github.com/aws-amplify/amplify-ui/issues/3155\" data-hovercard-type=\"issue\" data-hovercard-url=\"/aws-amplify/amplify-ui/issues/3155/hovercard\" href=\"https://github.com/aws-amplify/amplify-ui/issues/3155\">aws-amplify/amplify-ui#3155</a>.</p>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n\n<p dir=\"auto\">Npm packages can be published while containing invalid ESM.</p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n\n<p dir=\"auto\">Validate npm packages before they are published: npm should reject any <code class=\"notranslate\">npm publish</code> that publishes invalid ESM.</p>\n<h3 dir=\"auto\">References</h3>\n\n<p dir=\"auto\">For reference, <a href=\"https://publint.dev\" rel=\"nofollow\">https://publint.dev</a> is a project that validates whether an npm package is published correctly.</p>",
            "url": "https://github.com/npm/rfcs/issues/665",
            "title": "[RRFC] Validate ESM before npm publish",
            "date_modified": "2023-02-01T13:35:38.000Z",
            "date_published": "2023-01-03T19:19:16.000Z",
            "author": {
                "name": "brillout",
                "url": "https://github.com/brillout"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/114147910?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    Sorry, maybe I missed something, I know there's the RFC meetings, but can't find the calendar for them - when is this going to be discussed? Is it better to wait for the meeting or post the questions now?\"><pre class=\"notranslate\"><code class=\"notranslate\">    Sorry, maybe I missed something, I know there's the RFC meetings, but can't find the calendar for them - when is this going to be discussed? Is it better to wait for the meeting or post the questions now?\n</code></pre></div>\n<p dir=\"auto\"><em>Originally posted by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/dominykas/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dominykas\">@dominykas</a> in <a aria-label=\"Pull request #92\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"553729996\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/rfcs/issues/92\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/npm/rfcs/pull/92/hovercard?comment_id=578555614&amp;comment_type=issue_comment\" href=\"https://github.com/npm/rfcs/pull/92#issuecomment-578555614\">#92 (comment)</a></em></p>",
            "url": "https://github.com/npm/rfcs/issues/664",
            "title": "public facing calendar is missing",
            "date_modified": "2023-01-10T22:21:26.000Z",
            "date_published": "2023-01-02T10:42:26.000Z",
            "author": {
                "name": "jameskeyante",
                "url": "https://github.com/jameskeyante"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/120893153?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    The net net on this would be:\"><pre class=\"notranslate\"><code class=\"notranslate\">    The net net on this would be:\n</code></pre></div>\n<ul dir=\"auto\">\n<li>Use a staged package: <code class=\"notranslate\">npm install foo@2 --include-staged</code> (as long as <code class=\"notranslate\">2.x</code> versions are all in staging, like if it's a beta or somethign, and 1.x is the published versions).</li>\n<li>When <code class=\"notranslate\">foo@2</code> is promoted, then <code class=\"notranslate\">npm install foo@2 --include-staged</code> will pick up the promoted version.</li>\n<li>If the staged <code class=\"notranslate\">foo@2</code> depends on a staged <code class=\"notranslate\">bar@3</code>, then ok, that'll Just Work, because you're in \"include staged\" mode.</li>\n<li>When the pkg is promoted and the resolved changes, the package lock doesn't break.  (It <em>might</em> get slightly less canonical or cacheable, but then again, it might not.  Maybe we <em>want</em> to have content-addresses in our tarball urls!)</li>\n<li>If the staged version is overwritten with a new staged version, then the build will break (unless Pacote is taught to just handle this, which may be worthwhile, and would be possible.)</li>\n</ul>\n<p dir=\"auto\">I don't see any DX issues that justify restricting the utility of staged packages, but maybe I'm missing something.</p>\n<p dir=\"auto\"><em>Originally posted by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/isaacs/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/isaacs\">@isaacs</a> in <a aria-label=\"Pull request #92\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"553729996\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/rfcs/issues/92\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/npm/rfcs/pull/92/hovercard?comment_id=587129658&amp;comment_type=issue_comment\" href=\"https://github.com/npm/rfcs/pull/92#issuecomment-587129658\">#92 (comment)</a></em></p>",
            "url": "https://github.com/npm/rfcs/issues/662",
            "title": "The net net on this would be:",
            "date_modified": "2023-01-05T20:40:05.000Z",
            "date_published": "2022-12-18T16:49:31.000Z",
            "author": {
                "name": "Smospozz959",
                "url": "https://github.com/Smospozz959"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/502396?u=64311873cf31c6c9e5690f3a8a0fba6b5868a4ca&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Seems that the meeting link in the README is broken because Darcy's account was deactivated.</p>",
            "url": "https://github.com/npm/rfcs/issues/660",
            "title": "RFC meeting Zoom link is broken",
            "date_modified": "2022-12-14T19:05:55.000Z",
            "date_published": "2022-12-14T19:01:43.000Z",
            "author": {
                "name": "bnb",
                "url": "https://github.com/bnb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/60390085?u=0de2f08186d078300c4a04bfdea13fc5df5dc394&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Suggestion: Don't create Git tags by default. Invert the logic of <code class=\"notranslate\">--no-git-tag-version</code>. The dev should add option like <code class=\"notranslate\">--git-tag</code> or just <code class=\"notranslate\">--tag</code> to automatically create a tag. In my opinion we (e.g. CI) should have full control when and how to commit and tag. It's more error-prone to tag by default.</p>\n<p dir=\"auto\"><a href=\"https://docs.npmjs.com/cli/commands/npm-version\" rel=\"nofollow\">https://docs.npmjs.com/cli/commands/npm-version</a></p>",
            "url": "https://github.com/npm/rfcs/issues/659",
            "title": "[RRFC] Set version. Don't tag per default.",
            "date_modified": "2022-12-09T18:13:49.000Z",
            "date_published": "2022-12-08T14:00:55.000Z",
            "author": {
                "name": "infacto",
                "url": "https://github.com/infacto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4227194?u=1938515675a5503cd45760e1411ba5c6a91e31d1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">With npm v9, the <code class=\"notranslate\">npm bin</code> command was removed, which also removed the <code class=\"notranslate\">npm bin -g</code> command. It displayed the path for globally-installed packages, and also checked to make sure that that path was included in the <code class=\"notranslate\">$PATH</code> environment variable. For unix/mac, this is generally not an issue as global packages are installed to the same location as the node/npm binaries.</p>\n<p dir=\"auto\">However, with Windows it's different as the global packages are installed in a completely separate directory from the node installation. Being able to run <code class=\"notranslate\">node</code> does not necessarily mean that the user is also able to run the globally installed packages. Taken from the Windows installer, updating the <code class=\"notranslate\">$PATH</code> variable is split into two different \"features\".</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"* Add to PATH\n  * Node.js and npm - Add Node.js and npm (if installed) to the PATH environment variable\n  * npm modules - Add modules that are installed globally by npm to the PATH environment variable. This option works for the current user only.\"><pre class=\"notranslate\"><code class=\"notranslate\">* Add to PATH\n  * Node.js and npm - Add Node.js and npm (if installed) to the PATH environment variable\n  * npm modules - Add modules that are installed globally by npm to the PATH environment variable. This option works for the current user only.\n</code></pre></div>\n<p dir=\"auto\">With a clean install of node on Windows with these two features selected, it will add two separate locations to the <code class=\"notranslate\">$PATH</code>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"C:\\Program Files\\nodejs\nC:\\Users\\&lt;username&gt;\\AppData\\Roaming\\npm\"><pre class=\"notranslate\"><code class=\"notranslate\">C:\\Program Files\\nodejs\nC:\\Users\\&lt;username&gt;\\AppData\\Roaming\\npm\n</code></pre></div>\n<p dir=\"auto\">This is because of the value of <code class=\"notranslate\">prefix</code> decided by the builtin config, which is set to <a href=\"https://docs.npmjs.com/cli/v9/configuring-npm/folders?v=true#prefix-configuration\" rel=\"nofollow\"><code class=\"notranslate\">%APPDATA%\\npm</code> by default</a>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ npm config ls\n; &quot;builtin&quot; config from C:\\Program Files\\nodejs\\node_modules\\npm\\npmrc\n\nprefix = &quot;C:\\\\Users\\\\&lt;username&gt;\\\\AppData\\\\Roaming\\\\npm&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">$ npm config ls\n; \"builtin\" config from C:\\Program Files\\nodejs\\node_modules\\npm\\npmrc\n\nprefix = \"C:\\\\Users\\\\&lt;username&gt;\\\\AppData\\\\Roaming\\\\npm\"\n</code></pre></div>\n<p dir=\"auto\">If I then install a package (ex: <code class=\"notranslate\">typescript</code>) with <code class=\"notranslate\">npm i -g typescript</code>, this installs <code class=\"notranslate\">tsc</code> to <code class=\"notranslate\">C:\\Users\\&lt;username&gt;\\AppData\\Roaming\\npm\\tsc</code> which I'm only able to invoke successfully because of the second new entry in my PATH variable. This logic is entirely custom to npm, as it's derived from npm's <code class=\"notranslate\">prefix</code> config value.</p>\n<p dir=\"auto\">This all works seamlessly in the ideal case, but speaking as someone that handles troubleshooting for a large population of developers that are not always primarily doing Node/npm/JS development, incomplete or inaccurate <code class=\"notranslate\">$PATH</code> variables have been an uncommon yet consistent issue. It was useful for us to have <code class=\"notranslate\">npm bin -g</code> as that could prompt the user to add the global package location to their <code class=\"notranslate\">$PATH</code> if it wasn't already set (as it would warn with <code class=\"notranslate\">(not in PATH env variable)</code>).</p>\n<p dir=\"auto\">Given the nature of Windows' two-location installation, this does seem like a Windows-only problem. As such, I'm not sure what the cleanest fix would be. For this use case we do not need any of the \"non-global\" functionality of <code class=\"notranslate\">npm bin</code> without <code class=\"notranslate\">-g</code> that allowed for the aforementioned bad behavior, so I'm not suggesting that this command be added back as it was. If the functionality to check the global install location (and also if that was in the <code class=\"notranslate\">$PATH</code> variable) could be added to an existing command or even a new command, that would work well for us. I'd be happy to contribute such a feature (whatever it may look like) if that sounds like a good idea to all involved.</p>\n<h3 dir=\"auto\">Example</h3>\n<p dir=\"auto\">This RFC would be for a new command, subcommand, or flag that reproduces the behavior of <code class=\"notranslate\">npm bin -g</code>. Specifically, printing the location of globally installed executable packages and checking whether that location is available in the <code class=\"notranslate\">$PATH</code> environment variable.</p>\n<p dir=\"auto\">Potential suggestions:</p>\n<ul dir=\"auto\">\n<li>Add this as a subcommand/flag to <code class=\"notranslate\">npm prefix -g</code> as this path is derived from the <code class=\"notranslate\">prefix</code> config value.</li>\n<li>Make a new command that is responsible for <code class=\"notranslate\">$PATH</code>-related logic</li>\n<li>Something else entirely?</li>\n</ul>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n<p dir=\"auto\"><em>No platform-independent way to calculate location of globally installed packages.</em></p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ npm prefix bin -g\n$ npm path\n$ npm path bin\nC:\\Users\\&lt;username&gt;\\AppData\\Roaming\\npm\n(not in PATH env variable)\"><pre class=\"notranslate\"><code class=\"notranslate\">$ npm prefix bin -g\n$ npm path\n$ npm path bin\nC:\\Users\\&lt;username&gt;\\AppData\\Roaming\\npm\n(not in PATH env variable)\n</code></pre></div>\n<h3 dir=\"auto\">References</h3>\n<ul dir=\"auto\">\n<li>Command removed\n<ul dir=\"auto\">\n<li>Discussion: <a aria-label=\"Issue #537\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1346220661\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/statusboard/issues/537\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/statusboard/issues/537/hovercard\" href=\"https://github.com/npm/statusboard/issues/537\">npm/statusboard#537</a></li>\n<li>PR: <a aria-label=\"Pull request #5459\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1359177952\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/cli/issues/5459\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/npm/cli/pull/5459/hovercard\" href=\"https://github.com/npm/cli/pull/5459\">npm/cli#5459</a></li>\n</ul>\n</li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/657",
            "title": "[RRFC] Reintroduce global-only bin command",
            "date_modified": "2022-11-23T23:12:37.000Z",
            "date_published": "2022-11-22T15:29:53.000Z",
            "author": {
                "name": "molisani",
                "url": "https://github.com/molisani"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/459713?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Our team's Office Hours this week will cancelled (<strong>Wednesday November 9th, 2022</strong>) as the core team is heads down on making v9 GA as well as focusing on GitHub Universe (which we invite you all to join - ref. <a href=\"https://githubuniverse.com/\" rel=\"nofollow\">https://githubuniverse.com/</a>). We'll resume these sessions next week.</p>\n<p dir=\"auto\">See you next week!</p>",
            "url": "https://github.com/npm/rfcs/issues/650",
            "title": "ℹ️ CANCELLED: Office Hours for November 9th, 2022",
            "date_modified": "2022-11-07T21:33:20.000Z",
            "date_published": "2022-11-07T21:32:42.000Z",
            "author": {
                "name": "darcyclarke",
                "url": "https://github.com/darcyclarke"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7393198?u=44c7abcafdcc3c08843a526654488bd691cb5db7&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n\n<p dir=\"auto\">There can be a problem when multiple versions of a package in dependencies. but we generally find it difficult to issue warnings without false positives.</p>\n<p dir=\"auto\">However, in the case of a package that uses a global store, such as <code class=\"notranslate\">React</code>, multiple versions are not expected to be used at the same time in most cases. This often occurs as a runtime error and is a source of confusion.</p>\n<p dir=\"auto\">Therefore, I think it would be better to add a field like <code class=\"notranslate\">recommendUnique: boolean</code> that recommend such a package to be unique and issue a warning on any lint tools or <code class=\"notranslate\">npm</code> ownself.</p>\n<h3 dir=\"auto\">Example</h3>\n\n<p dir=\"auto\">package.json</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"{\n  &quot;recommendUnique&quot;: true\n}\"><pre class=\"notranslate\">{\n  <span class=\"pl-ent\">\"recommendUnique\"</span>: <span class=\"pl-c1\">true</span>\n}</pre></div>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n\n<h4 dir=\"auto\">Desired Behaviour</h4>\n\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ some-linting-tool or npm install\n[warn] `React` recommend unique version but detect multiple version. please run `npm ls` and solve it.\"><pre class=\"notranslate\">$ some-linting-tool or npm install\n[warn] <span class=\"pl-s\"><span class=\"pl-pds\">`</span>React<span class=\"pl-pds\">`</span></span> recommend unique version but detect multiple version. please run <span class=\"pl-s\"><span class=\"pl-pds\">`</span>npm ls<span class=\"pl-pds\">`</span></span> and solve it.</pre></div>\n<h3 dir=\"auto\">References</h3>\n\n<ul dir=\"auto\">\n<li>Related React Issue: <a aria-label=\"Issue #13991\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"374587589\" data-permission-text=\"Title is private\" data-url=\"https://github.com/facebook/react/issues/13991\" data-hovercard-type=\"issue\" data-hovercard-url=\"/facebook/react/issues/13991/hovercard\" href=\"https://github.com/facebook/react/issues/13991\">facebook/react#13991</a></li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/649",
            "title": "[RRFC] Add a field to package.json recommending that the package be unique.",
            "date_modified": "2022-11-01T04:55:32.000Z",
            "date_published": "2022-10-29T05:59:30.000Z",
            "author": {
                "name": "ishowta",
                "url": "https://github.com/ishowta"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/91213?u=c5d308beaf78f91744200e6507109f04ad881503&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Office Hours for today is cancelled as the core team is heads down on a new release. We'll resume again next week.</p>\n<p dir=\"auto\">See you next week!</p>",
            "url": "https://github.com/npm/rfcs/issues/647",
            "title": "CANCELLED: Office Hours October 19th, 2022",
            "date_modified": "2022-10-26T21:18:42.000Z",
            "date_published": "2022-10-19T17:08:33.000Z",
            "author": {
                "name": "fritzy",
                "url": "https://github.com/fritzy"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6059356?u=0f4c2c459c0eb6d18c4ec93e6954a800742330e2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">When a vulnerability is introduced to an npm package, it takes at least several days to discover the vulnerability and to report the vulnerable release to security databases (npm, Snyk, dependabot, etc.)</p>\n<p dir=\"auto\">Because of that reason, it would make sense for developers who want stability and security for their projects to use 3rd party dependencies with version that matches these conditions:</p>\n<ol dir=\"auto\">\n<li>as latest as possible (the obvious one)</li>\n<li>free from vulnerabilities, i.e. not present in npm/Snyk/dependabot security databases</li>\n<li>X days mature, because of the reason mentioned above - it takes time to discover and report vulnerabilities</li>\n</ol>\n<p dir=\"auto\">There's existing <code class=\"notranslate\">--before</code> parameter, but it doesn't work for this purpose</p>\n<h3 dir=\"auto\">Examples</h3>\n<p dir=\"auto\">As a maintainer of a popular plugin I several times shipped a bug or a breaking change in a patch release. Usually, these issues are noticed by users during the next several hours and after several more hours, I ship another patch release with a fix.</p>\n<p dir=\"auto\">And here's why <code class=\"notranslate\">--before</code> wouldn't work:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">some-cool-package</code> has <code class=\"notranslate\">6.6.6</code> with a bug released 4 days ago and <code class=\"notranslate\">6.6.7</code> with bug-fix released 2 days ago</li>\n<li>with <code class=\"notranslate\">--before=\"3 days\"</code> the buggy version would be installed which would be the exact opposite of desired</li>\n<li>with <code class=\"notranslate\">--stabilityDays=3</code> neither <code class=\"notranslate\">6.6.6</code> nor <code class=\"notranslate\">6.6.7</code> would be installed which is desired because <code class=\"notranslate\">6.6.6</code> is buggy and <code class=\"notranslate\">6.6.7</code> is immature.</li>\n</ul>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n<p dir=\"auto\">None.</p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"npm install --stabilityDays=3\"><pre class=\"notranslate\">npm install --stabilityDays=3</pre></div>\n<h3 dir=\"auto\">References</h3>\n<p dir=\"auto\">Renovate has this feature, it's named <code class=\"notranslate\">stabilityDays</code>: <a href=\"https://docs.renovatebot.com/configuration-options/#stabilitydays\" rel=\"nofollow\">https://docs.renovatebot.com/configuration-options/#stabilitydays</a></p>\n<p dir=\"auto\">Also <code class=\"notranslate\">stabilityDays</code> is mentioned in this RFC: <a aria-label=\"Issue #549\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1164111829\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/rfcs/issues/549\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/rfcs/issues/549/hovercard\" href=\"https://github.com/npm/rfcs/issues/549\">#549</a></p>",
            "url": "https://github.com/npm/rfcs/issues/646",
            "title": "[RRFC] Ability to set minimum maturity (in days) of versions to upgrade",
            "date_modified": "2023-01-05T20:46:30.000Z",
            "date_published": "2022-10-18T09:20:40.000Z",
            "author": {
                "name": "limonte",
                "url": "https://github.com/limonte"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1904430?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">I'd want to be able to set custom request headers in order to be able to use npm registries behind a proxy that requires a specific header key and value (Another use case might be custom caches/registries (for multiple programming languages) that require a header that isn't Authorization - this isn't a use case I've had, though)</p>\n<ul dir=\"auto\">\n<li>Proxies that have a mandatory HTTP custom header to authenticate are an alternative for hosting a private/internal registry, which can be used without needing a VPN</li>\n</ul>\n<p dir=\"auto\">When a proxy is used to connect to a registry, it may have no way to accept an <code class=\"notranslate\">Authorization:</code> HTTP header, especially if the applications it proxies use the <code class=\"notranslate\">Authorization</code> for basic auth or oauth</p>\n<p dir=\"auto\">The motivation of this is similar <a aria-label=\"Issue #18583\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"258918060\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/npm/issues/18583\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/npm/issues/18583/hovercard\" href=\"https://github.com/npm/npm/issues/18583\">npm/npm#18583</a></p>\n<h3 dir=\"auto\">Example</h3>\n<ul dir=\"auto\">\n<li>e.g. <code class=\"notranslate\">//my.private.registry.host.com/registry/path/:_customAuthHeader = My-Auth-Header: abcXYZ123:/==</code> in a config file used by the npm cli would set <code class=\"notranslate\">req.headers['My-Auth-Header'] = abcXYZ123:/==</code> (not familiar with whether this expects escaping or not, it should do what the _auth header does)</li>\n</ul>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n<p dir=\"auto\">Only a few hardcoded headers are supported, as shown in the snippet: <code class=\"notranslate\">authorization:</code>, and some <code class=\"notranslate\">npm-*</code> headers</p>\n<p dir=\"auto\"><a href=\"https://github.com/npm/npm-registry-fetch/blob/42d605cb00986c6775e6ec1732b114e065266ae9/lib/index.js#L211-L242\">https://github.com/npm/npm-registry-fetch/blob/42d605cb00986c6775e6ec1732b114e065266ae9/lib/index.js#L211-L242</a></p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n<p dir=\"auto\">Add support for adding custom headers through the <code class=\"notranslate\">.npmrc</code> file</p>\n<ul dir=\"auto\">\n<li>e.g. <code class=\"notranslate\">//my.private.registry.host.com/registry/path/:_customAuthHeader = My-Auth-Header: abcXYZ123:/==</code> in the <code class=\"notranslate\">.npmrc</code> file used by the npm cli would set <code class=\"notranslate\">req.headers['My-Auth-Header'] = abcXYZ123:/==</code> for requests to //my.private.registry.host.com/registry/path/ (not familiar with whether this expects escaping or not, it should do what the _auth header does)</li>\n<li>Optionally, this header could be repeatable, though I expect to only need one header set for the vast majority of use cases</li>\n</ul>\n<p dir=\"auto\">Known http headers that have existing non-auth meanings or the npm headers that are already set may make sense to exclude (and emit a warning), with a case-insensitive string comparison (e.g. Content-Type, authorization, user-agent, etc.)</p>\n<p dir=\"auto\">This could be limited to <code class=\"notranslate\">[a-zA-Z0-9_-]</code> for the header key, and emit an error for other headers, to prevent sending invalid/ambiguous values, spaces, etc in the header key</p>\n<ul dir=\"auto\">\n<li>Key names found in Object.prototype such as <code class=\"notranslate\">__proto__</code> and <code class=\"notranslate\">toString</code> could also be rejected just in case a custom server itself was buggy or an application using the npm-registry-client library other than npm was buggy</li>\n<li>The <code class=\"notranslate\">npm-*</code> header prefix for unknown headers is something that I don't need - I'm fine with forbidding that entire prefix initially and leaving any RRFC for that to work to anyone who has a use case for those</li>\n</ul>\n<p dir=\"auto\">I'd imagine this be similarly able to be scoped to a registry, similar to the always-auth/_authToken settings.</p>\n<p dir=\"auto\">The key and value could be split on the first '=' and trimmed, then set the same way as other values in the getHeaders function</p>\n<p dir=\"auto\"><a href=\"https://github.com/npm/npm-registry-fetch/blob/42d605cb00986c6775e6ec1732b114e065266ae9/lib/index.js#L211-L242\">https://github.com/npm/npm-registry-fetch/blob/42d605cb00986c6775e6ec1732b114e065266ae9/lib/index.js#L211-L242</a></p>\n<h3 dir=\"auto\">References</h3>\n<p dir=\"auto\">The motivation of this is similar <a aria-label=\"Issue #18583\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"258918060\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/npm/issues/18583\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/npm/issues/18583/hovercard\" href=\"https://github.com/npm/npm/issues/18583\">npm/npm#18583</a></p>\n<p dir=\"auto\">I'd filed <a aria-label=\"Issue #145\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1407885471\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/npm-registry-fetch/issues/145\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/npm-registry-fetch/issues/145/hovercard\" href=\"https://github.com/npm/npm-registry-fetch/issues/145\">npm/npm-registry-fetch#145</a> before discovering the rfcs repo (CONTRIBUTING.md in npm/npm-registry-fetch was a 404)</p>",
            "url": "https://github.com/npm/rfcs/issues/645",
            "title": "[RRFC] Support sending custom request headers to an npm registry (`$MY_AUTH_HEADER: $VALUE`)",
            "date_modified": "2023-01-05T20:48:59.000Z",
            "date_published": "2022-10-13T14:34:56.000Z",
            "author": {
                "name": "TysonAndre",
                "url": "https://github.com/TysonAndre"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/650035?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">At my workplace npm projects have dynamic project specific configuration - such as registry and authentication.<br>\nPrevious internal build tools set this configuration in environment NPM_CONFIG_ variables before executing npm, but we want to move to setting this configuration in a npmrc file so ide's and other tools can read them.</p>\n<p dir=\"auto\">However we want to separate this dynamic configuration from static configuration (like setting legacy-peer-deps) so static config can be checked into source control while dynamic config can be excluded. So we want two project specific npmrc files.</p>\n<h3 dir=\"auto\">Example</h3>\n\n<p dir=\"auto\">There are many ways to implement this idea, a new npmrc location, a .npmrc.d directory of files, but I propose a new npm configuration <code class=\"notranslate\">extends=path/to/file</code> (naming up for discussion) that adds an additional additional npmrc file.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"# project .npmrc. Checked into source control.\n\n# project settings\nlegacy-peer-deps=true\n\nextends=.private-project-npmrc\"><pre class=\"notranslate\"><code class=\"notranslate\"># project .npmrc. Checked into source control.\n\n# project settings\nlegacy-peer-deps=true\n\nextends=.private-project-npmrc\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"# .private-project-npmrc. Ignored in source control.\n\nregistry=https://private.registry\n//private.registry/:_auth=...\"><pre class=\"notranslate\"><code class=\"notranslate\"># .private-project-npmrc. Ignored in source control.\n\nregistry=https://private.registry\n//private.registry/:_auth=...\n</code></pre></div>\n<p dir=\"auto\">Ideally npm config would be extended to support arbitrary file paths, either under the —location arg or another.</p>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n<p dir=\"auto\">Currently there are project, user, global, and built-in npm configurations. Each location has one file. When projects use different registries or authentication there is contention over changes to the project npmrc because some values should be checked into source control while others should not while popular source control systems like git operate on files.</p>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n<p dir=\"auto\">Npm has at-least two project specific npmrc file so one can be checked in while the other is not.</p>\n<h3 dir=\"auto\">References</h3>\n\n<ul dir=\"auto\">\n<li>n/a</li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/641",
            "title": "[RRFC] Support multiple project npmrc file",
            "date_modified": "2023-01-05T21:54:40.000Z",
            "date_published": "2022-10-04T16:41:48.000Z",
            "author": {
                "name": "everett1992",
                "url": "https://github.com/everett1992"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/229881?u=58675cc3f9993517e5f29209ccba960d79b719ad&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<p dir=\"auto\">When comparing CI logs, it would be very helpful to see the npm version that was used with <code class=\"notranslate\">npm install</code>, <code class=\"notranslate\">npm run build</code>, or really any npm command.</p>\n<h3 dir=\"auto\">Example</h3>\n<p dir=\"auto\">This came up recently when npm changed the behavior of peer dependencies in <code class=\"notranslate\">npm@8.6.0</code> so that <code class=\"notranslate\">npm install</code> suddenly started failing with <code class=\"notranslate\">npm ERR! Fix the upstream dependency conflict</code>. If the version was printed, a simple diff of the <code class=\"notranslate\">npm install</code> logs before and after would have made it clear that the npm version changed and that it wasn't a change to the <code class=\"notranslate\">package-lock.json</code> that caused the error.</p>\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ npm install\n\nup to date, audited 228 packages in 577ms\n\n78 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\"><pre class=\"notranslate\"><code class=\"notranslate\">$ npm install\n\nup to date, audited 228 packages in 577ms\n\n78 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n</code></pre></div>\n<h4 dir=\"auto\">Desired Behaviour</h4>\n<p dir=\"auto\">Something like yarn where it prints the version on the first line</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ yarn install\n\nyarn install v1.22.17\n[1/4] 🔍  Resolving packages...\nsuccess Already up-to-date.\n✨  Done in 0.10s.\"><pre class=\"notranslate\"><code class=\"notranslate\">$ yarn install\n\nyarn install v1.22.17\n[1/4] 🔍  Resolving packages...\nsuccess Already up-to-date.\n✨  Done in 0.10s.\n</code></pre></div>\n<h3 dir=\"auto\">References</h3>\n\n<ul dir=\"auto\">\n<li>n/a</li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/639",
            "title": "[RRFC] Print npm version for each command",
            "date_modified": "2022-11-22T15:29:30.000Z",
            "date_published": "2022-10-03T16:33:41.000Z",
            "author": {
                "name": "styfle",
                "url": "https://github.com/styfle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/113370520?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n<h3 dir=\"auto\">1. Extending the usefulness of <code class=\"notranslate\">npm query</code></h3>\n<p dir=\"auto\">With the new <code class=\"notranslate\">npm query</code> command it's now possible to select subtrees of your dependencies for many different purposes, auditing, inspecting, upgrading dependencies, funding, etc.</p>\n<p dir=\"auto\">For all of these purposes, you sometimes also want the contents of these dependencies as well, even a full install. You can run a full install today, but that tends to take awhile and if you're auditing or want to do something sensitive</p>\n<h3 dir=\"auto\">2. Allow users to install just the packages they need for a task</h3>\n<p dir=\"auto\">For users with sizable installs, <code class=\"notranslate\">npm install</code> is one of the longest steps in their CI process. And oftentimes its not worthwhile to parallelize running separate npm scripts across CI nodes, simply because npm install takes much longer than the script itself.</p>\n<p dir=\"auto\">If you could run:</p>\n<div class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"npm install --query &quot;eslint, [name^=eslint-plugin-], [name^=@typescript-eslint/], typescript&quot;\"><pre class=\"notranslate\"><span class=\"pl-s1\">npm</span> <span class=\"pl-s1\">install</span> <span class=\"pl-c1\">--</span><span class=\"pl-s1\">query</span> <span class=\"pl-s\">\"eslint, [name^=eslint-plugin-], [name^=@typescript-eslint/], typescript\"</span></pre></div>\n<p dir=\"auto\">And get the subtree of your dependencies queried, it would be much faster than trying to run a full <code class=\"notranslate\">npm install/ci</code> and splitting tasks across ci nodes would be much more impactful.</p>\n<p dir=\"auto\">Other tools could be written around <code class=\"notranslate\">npm install --query</code> to make this more powerful by generating queries for you.</p>\n<h3 dir=\"auto\">3. \"Explain\" existing features like <code class=\"notranslate\">--production</code></h3>\n<p dir=\"auto\">Features like <code class=\"notranslate\">--production</code> could be implemented via queries, it could be called an alias.</p>\n<h3 dir=\"auto\">4. Avoid building one-off features in installs</h3>\n<p dir=\"auto\">By giving users a powerful querying syntax in installs, many feature requests related to installs could point to this instead.</p>\n<h2 dir=\"auto\">Example</h2>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"npm install --query &lt;query&gt;\nnpm install --query &quot;*:attr(contributors, :attr([name~=Jordan]))&quot;\nnpm install --query &quot;eslint, [name^=eslint-plugin-], [name^=@typescript-eslint/], typescript&quot;\nnpm install --query &quot;.prod&quot; # same as `npm install --production`\"><pre class=\"notranslate\">npm install --query <span class=\"pl-k\">&lt;</span>query<span class=\"pl-k\">&gt;</span>\nnpm install --query <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>*:attr(contributors, :attr([name~=Jordan]))<span class=\"pl-pds\">\"</span></span>\nnpm install --query <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>eslint, [name^=eslint-plugin-], [name^=@typescript-eslint/], typescript<span class=\"pl-pds\">\"</span></span>\nnpm install --query <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>.prod<span class=\"pl-pds\">\"</span></span> <span class=\"pl-c\"><span class=\"pl-c\">#</span> same as `npm install --production`</span></pre></div>\n<h2 dir=\"auto\">How</h2>\n<h3 dir=\"auto\">Current Behaviour</h3>\n<p dir=\"auto\">N/A, only options are <code class=\"notranslate\">npm install [--production]</code></p>\n<h3 dir=\"auto\">Desired Behaviour</h3>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">npm install --query &lt;query&gt;</code></li>\n<li>Build the minimal tree that includes all of the dependencies matched by <code class=\"notranslate\">&lt;query&gt;</code></li>\n<li>Preserve <code class=\"notranslate\">npm install</code>'s other behaviors otherwise</li>\n</ul>\n<h2 dir=\"auto\">References</h2>\n<p dir=\"auto\">Related to <a aria-label=\"Issue #360\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"849959295\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/rfcs/issues/360\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/rfcs/issues/360/hovercard\" href=\"https://github.com/npm/rfcs/issues/360\">#360</a>, <a aria-label=\"Issue #592\" class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1246646756\" data-permission-text=\"Title is private\" data-url=\"https://github.com/npm/rfcs/issues/592\" data-hovercard-type=\"issue\" data-hovercard-url=\"/npm/rfcs/issues/592/hovercard\" href=\"https://github.com/npm/rfcs/issues/592\">#592</a></p>",
            "url": "https://github.com/npm/rfcs/issues/638",
            "title": "[RRFC] Query Installs",
            "date_modified": "2022-09-28T16:03:31.000Z",
            "date_published": "2022-09-22T19:08:12.000Z",
            "author": {
                "name": "jamiebuilds-signal",
                "url": "https://github.com/jamiebuilds-signal"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6381507?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Current behavior</h2>\n<p dir=\"auto\">One of the most popular use cases for pkg get command is getting values for other scripts as variables. However currently it's returning the value with quotes:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"npm pkg get version \n&quot;4.12.2&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">npm pkg get version \n\"4.12.2\"\n</code></pre></div>\n<p dir=\"auto\">The current solution is to use it in a pipe and remove quotes somehow with sed or jq.:<br>\nExample:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"nx build app version=$(npm pkg get version | jq -r)\"><pre class=\"notranslate\"><code class=\"notranslate\">nx build app version=$(npm pkg get version | jq -r)\n</code></pre></div>\n<p dir=\"auto\">However it comes with some cons:</p>\n<ul dir=\"auto\">\n<li>It's not cross-platform</li>\n<li>Requires additional packages installation</li>\n<li>Code looks more complicated</li>\n<li>No unique de-facto standard</li>\n</ul>\n<h3 dir=\"auto\">Desired Behaviour</h3>\n<p dir=\"auto\">To introduce --raw/-r flag for npm pkg get command<br>\nThus, for the following command we will expect the raw value:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"npm pkg get version --raw\n4.12.2\"><pre class=\"notranslate\"><code class=\"notranslate\">npm pkg get version --raw\n4.12.2\n</code></pre></div>\n<p dir=\"auto\">So the previous example would look like :</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"nx build app version=$(npm pkg get version --raw)\"><pre class=\"notranslate\"><code class=\"notranslate\">nx build app version=$(npm pkg get version --raw)\n</code></pre></div>\n<h3 dir=\"auto\">References</h3>\n<p dir=\"auto\">It's a simple case but you can see how much discussion about this topic:<br>\n<a href=\"https://gist.github.com/DarrenN/8c6a5b969481725a4413\">https://gist.github.com/DarrenN/8c6a5b969481725a4413</a><br>\n<a href=\"https://stackoverflow.com/questions/9153571/is-there-a-way-to-get-version-from-package-json-in-nodejs-code\" rel=\"nofollow\">https://stackoverflow.com/questions/9153571/is-there-a-way-to-get-version-from-package-json-in-nodejs-code</a></p>",
            "url": "https://github.com/npm/rfcs/issues/634",
            "title": "[RRFC] \"npm pkg get <value> --raw\" to get raw unquoted values for further use in scripts",
            "date_modified": "2022-11-10T20:34:49.000Z",
            "date_published": "2022-09-15T09:52:38.000Z",
            "author": {
                "name": "ThePlenkov",
                "url": "https://github.com/ThePlenkov"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/108984051?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n\n<h3 dir=\"auto\">Example</h3>\n\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n\n<h4 dir=\"auto\">Desired Behaviour</h4>\n\n<h3 dir=\"auto\">References</h3>\n\n<ul dir=\"auto\">\n<li>n/a</li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/632",
            "title": "[RRFC] <title>",
            "date_modified": "2022-09-14T17:34:38.000Z",
            "date_published": "2022-09-09T13:04:33.000Z",
            "author": {
                "name": "denox55",
                "url": "https://github.com/denox55"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/113018783?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h2 dir=\"auto\">Motivation (\"The Why\")</h2>\n\n<h3 dir=\"auto\">Example</h3>\n\n<h3 dir=\"auto\">How</h3>\n<h4 dir=\"auto\">Current Behaviour</h4>\n\n<h4 dir=\"auto\">Desired Behaviour</h4>\n\n<h3 dir=\"auto\">References</h3>\n`\n<ul dir=\"auto\">\n<li><a href=\"url\">n/a</a></li>\n</ul>",
            "url": "https://github.com/npm/rfcs/issues/631",
            "title": "[RRFC] <title>",
            "date_modified": "2022-09-07T18:09:13.000Z",
            "date_published": "2022-09-07T10:15:07.000Z",
            "author": {
                "name": "cronosid-xyz",
                "url": "https://github.com/cronosid-xyz"
            }
        }
    ]
}