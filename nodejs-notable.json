{
    "version": "https://jsonfeed.org/version/1",
    "title": "Node.js notable changes",
    "home_page_url": "https://azu.github.io/github-search-rss/nodejs-notable.json",
    "feed_url": "https://azu.github.io/github-search-rss/nodejs-notable.json",
    "description": "Node.js notable changes on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4299420?u=d7eb2cf3db5f2a4df73a8f719c2e9e3d648e4e43&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">process.getBuiltinModule(id)</code> provides a way to load built-in modules<br>\nin a globally available function. ES Modules that need to support<br>\nother environments can use it to conditionally load a Node.js built-in<br>\nwhen it is run in Node.js, without having to deal with the resolution<br>\nerror that can be thrown by <code class=\"notranslate\">import</code> in a non-Node.js environment or<br>\nhaving to use dynamic <code class=\"notranslate\">import()</code> which either turns the module into<br>\nan asynchronous module, or turns a synchronous API into an asynchronous one.</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"if (globalThis.process?.getBuiltinModule) {\n  // Run in Node.js, use the Node.js fs module.\n  const fs = globalThis.process.getBuiltinModule('fs');\n  // If `require()` is needed to load user-modules, use createRequire()\n  const module = globalThis.process.getBuiltinModule('module');\n  const require = module.createRequire(import.meta.url);\n  const foo = require('foo');\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">if</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">globalThis</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">process</span><span class=\"pl-kos\">?.</span><span class=\"pl-c1\">getBuiltinModule</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-c\">// Run in Node.js, use the Node.js fs module.</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">fs</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">globalThis</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">process</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getBuiltinModule</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'fs'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-c\">// If `require()` is needed to load user-modules, use createRequire()</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">module</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">globalThis</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">process</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">getBuiltinModule</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'module'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">require</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">module</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">createRequire</span><span class=\"pl-kos\">(</span><span class=\"pl-k\">import</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">meta</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">url</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">foo</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">require</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'foo'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">If <code class=\"notranslate\">id</code> specifies a built-in module available in the current Node.js process,<br>\n<code class=\"notranslate\">process.getBuiltinModule(id)</code> method returns the corresponding built-in<br>\nmodule. If <code class=\"notranslate\">id</code> does not correspond to any built-in module, <code class=\"notranslate\">undefined</code><br>\nis returned.</p>\n<p dir=\"auto\"><code class=\"notranslate\">process.getBuiltinModule(id)</code> accepts built-in module IDs that are recognized<br>\nby <code class=\"notranslate\">module.isBuiltin(id)</code>.</p>\n<p dir=\"auto\">The references returned by <code class=\"notranslate\">process.getBuiltinModule(id)</code> always point to<br>\nthe built-in module corresponding to <code class=\"notranslate\">id</code> even if users modify<br>\n<code class=\"notranslate\">require.cache</code> so that <code class=\"notranslate\">require(id)</code> returns something else.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52599.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2253465122\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/52599\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/52599/hovercard\" href=\"https://github.com/nodejs/node/issues/52599\">#52599</a></p>\n",
            "url": "https://github.com/nodejs/node/pull/52762",
            "title": "process: add process.getBuiltinModule(id)",
            "date_modified": "2024-05-28T20:23:18.000Z",
            "date_published": "2024-04-30T16:54:58.000Z",
            "author": {
                "name": "joyeecheung",
                "url": "https://github.com/joyeecheung"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/36735501?u=8e93f809522831771aab98cbb2a67c5e67e673d5&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">We are moving all the deprecated utils function to End Of Life</p>",
            "url": "https://github.com/nodejs/node/pull/52744",
            "title": "util: move deprecated utils to eol",
            "date_modified": "2024-05-06T09:38:12.000Z",
            "date_published": "2024-04-29T07:47:36.000Z",
            "author": {
                "name": "marco-ippolito",
                "url": "https://github.com/marco-ippolito"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/26234614?u=5edcb211e86232b06e6d6133439f9490f9f5d689&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Refs: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1606023653\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/security-wg/issues/898\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/security-wg/issues/898/hovercard\" href=\"https://github.com/nodejs/security-wg/issues/898\">nodejs/security-wg#898</a></p>\n<p dir=\"auto\">With this PR, we throw access denied asynchronously for async APIs.</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"fs.readFile('restricted-file.md', (error) =&gt; {\n  // error is ERR_ACCESS_DENIED\n})\"><pre class=\"notranslate\"><span class=\"pl-s1\">fs</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">readFile</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'restricted-file.md'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">error</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-c\">// error is ERR_ACCESS_DENIED</span>\n<span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">cc/ @nodejs/security-wg</p>",
            "url": "https://github.com/nodejs/node/pull/52730",
            "title": "src,permission: throw async errors on async APIs",
            "date_modified": "2024-04-30T02:19:57.000Z",
            "date_published": "2024-04-28T02:17:16.000Z",
            "author": {
                "name": "RafaelGSS",
                "url": "https://github.com/RafaelGSS"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/26234614?u=5edcb211e86232b06e6d6133439f9490f9f5d689&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Refs: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2250041689\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/52575\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/52575/hovercard\" href=\"https://github.com/nodejs/node/issues/52575\">#52575</a></p>\n<hr>\n<p dir=\"auto\"><strong>Summary</strong>: We are dropping the <code class=\"notranslate\">--experimental-policy</code> feature from Node.js.</p>",
            "url": "https://github.com/nodejs/node/pull/52583",
            "title": "lib,src: remove --experimental-policy",
            "date_modified": "2024-06-17T11:56:47.000Z",
            "date_published": "2024-04-18T20:59:54.000Z",
            "author": {
                "name": "RafaelGSS",
                "url": "https://github.com/RafaelGSS"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4299420?u=d7eb2cf3db5f2a4df73a8f719c2e9e3d648e4e43&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is the initial PR for implementing the idea proposed in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1659280442\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/47472\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/47472/hovercard\" href=\"https://github.com/nodejs/node/issues/47472\">#47472</a>. It takes inspiration from ccache, the <a href=\"https://www.npmjs.com/package/v8-compile-cache\" rel=\"nofollow\">v8-compile-cache npm package</a> (but faster, supports ESM and replaces CJS loader moneky-patching in user land) and <a href=\"https://docs.google.com/document/d/1HY4jVB3mCoYWADaZgmRxFmC2vm8qFKUzdC4NZN5oVZA/view#heading=h.ijtb4m8g3w00\" rel=\"nofollow\">v8 code caching in Blink</a>. The first commit is backported from <a href=\"https://chromium-review.googlesource.com/c/v8/v8/+/5401780\" rel=\"nofollow\">https://chromium-review.googlesource.com/c/v8/v8/+/5401780</a> which has already landed in the upstream (this is required for import() to work in deserialized code). For more motivation and background of this PR, check out <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1659280442\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/47472\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/47472/hovercard\" href=\"https://github.com/nodejs/node/issues/47472\">#47472</a></p>\n<p dir=\"auto\">Local numbers:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"❯ hyperfine &quot;./out/Release/node test/fixtures/snapshot/typescript.js&quot; --warmup 5\nBenchmark 1: ./out/Release/node test/fixtures/snapshot/typescript.js\n  Time (mean ± σ):     124.3 ms ±  13.2 ms    [User: 109.6 ms, System: 11.6 ms]\n  Range (min … max):   116.1 ms … 170.2 ms    21 runs\n\n❯ export NODE_COMPILE_CACHE=/tmp/.node_compile_cache\n❯ hyperfine &quot;./out/Release/node test/fixtures/snapshot/typescript.js&quot; --warmup 5\nBenchmark 1: ./out/Release/node test/fixtures/snapshot/typescript.js\n  Time (mean ± σ):      72.3 ms ±   3.2 ms    [User: 62.3 ms, System: 10.2 ms]\n  Range (min … max):    70.5 ms …  87.2 ms    40 runs\"><pre class=\"notranslate\"><code class=\"notranslate\">❯ hyperfine \"./out/Release/node test/fixtures/snapshot/typescript.js\" --warmup 5\nBenchmark 1: ./out/Release/node test/fixtures/snapshot/typescript.js\n  Time (mean ± σ):     124.3 ms ±  13.2 ms    [User: 109.6 ms, System: 11.6 ms]\n  Range (min … max):   116.1 ms … 170.2 ms    21 runs\n\n❯ export NODE_COMPILE_CACHE=/tmp/.node_compile_cache\n❯ hyperfine \"./out/Release/node test/fixtures/snapshot/typescript.js\" --warmup 5\nBenchmark 1: ./out/Release/node test/fixtures/snapshot/typescript.js\n  Time (mean ± σ):      72.3 ms ±   3.2 ms    [User: 62.3 ms, System: 10.2 ms]\n  Range (min … max):    70.5 ms …  87.2 ms    40 runs\n</code></pre></div>\n<p dir=\"auto\">There are more numbers from folks trying on an earlier iteration of this work (although this branch now hashes the code and the cache as an extra check, but crc32 should be fast enough that it's not too big of an overhead). For example from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1659280442\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/47472\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/47472/hovercard?comment_id=2027786716&amp;comment_type=issue_comment\" href=\"https://github.com/nodejs/node/issues/47472#issuecomment-2027786716\">#47472 (comment)</a> <code class=\"notranslate\">tsc --version</code> can go from ~90ms to ~40ms, <code class=\"notranslate\">yarn --version</code> can go from ~190ms to ~135ms, from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1659280442\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/47472\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/47472/hovercard?comment_id=2027820327&amp;comment_type=issue_comment\" href=\"https://github.com/nodejs/node/issues/47472#issuecomment-2027820327\">#47472 (comment)</a> <code class=\"notranslate\">npm run echo</code> with a <code class=\"notranslate\">ncc</code>-bundled npm may go from  ~150ms to ~110ms</p>\n<hr>\n<h3 dir=\"auto\">summary</h3>\n<p dir=\"auto\">This patch implements automatic on-disk code caching that can be enabled<br>\nvia an environment variable NODE_COMPILE_CACHE.</p>\n<p dir=\"auto\">When set, whenever Node.js compiles a CommonJS or a ECMAScript Module,<br>\nit will use on-disk <a href=\"https://v8.dev/blog/code-caching-for-devs\" rel=\"nofollow\">V8 code cache</a> persisted in the specified directory<br>\nto speed up the compilation. This may slow down the first load of a<br>\nmodule graph, but subsequent loads of the same module graph may get<br>\na significant speedup if the contents of the modules do not change.<br>\nLocally, this speeds up loading of test/fixtures/snapshot/typescript.js<br>\nfrom ~130ms to ~80ms.</p>\n<p dir=\"auto\">To clean up the generated code cache, simply remove the directory.<br>\nIt will be recreated the next time the same directory is used for<br>\n<code class=\"notranslate\">NODE_COMPILE_CACHE</code>.</p>\n<p dir=\"auto\">Compilation cache generated by one version of Node.js may not be used<br>\nby a different version of Node.js. Cache generated by different versions<br>\nof Node.js will be stored separately if the same directory is used<br>\nto persist the cache, so they can co-exist.</p>\n<p dir=\"auto\">Caveat: currently when using this with V8 JavaScript code coverage, the<br>\ncoverage being collected by V8 may be less precise in functions that are<br>\ndeserialized from the code cache. It's recommended to turn this off when<br>\nrunning tests to generate precise coverage.</p>\n<p dir=\"auto\">Implementation details:</p>\n<p dir=\"auto\">There is one cache file per module on disk. The directory layout<br>\nis:</p>\n<ul dir=\"auto\">\n<li>Compile cache directory (from NODE_COMPILE_CACHE)\n<ul dir=\"auto\">\n<li>8b23c8fe: CRC32 hash of CachedDataVersionTag + NODE_VERESION</li>\n<li>2ea3424d:\n<ul dir=\"auto\">\n<li>10860e5a: CRC32 hash of filename + module type</li>\n<li>431e9adc: ...</li>\n<li>...</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p dir=\"auto\">Inside the cache file, there is a header followed by the actual<br>\ncache content:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"[uint32_t] code size\n[uint32_t] code hash\n[uint32_t] cache size\n[uint32_t] cache hash\n... compile cache content ...\"><pre class=\"notranslate\"><code class=\"notranslate\">[uint32_t] code size\n[uint32_t] code hash\n[uint32_t] cache size\n[uint32_t] cache hash\n... compile cache content ...\n</code></pre></div>\n<p dir=\"auto\">When reading the cache file, we'll also check if the code size<br>\nand code hash match the code that the module loader is loading<br>\nand whether the cache size and cache hash match the file content<br>\nread. If they don't match, or if V8 rejects the cache passed,<br>\nwe'll ignore the mismatch cache, and regenerate the cache after<br>\ncompilation succeeds and rewrite it to disk.</p>\n<p dir=\"auto\">There are still a bunch of TODOs for this feature, some of them are documented as TODO comments. In addition we can look into idle-time code cache serialization/writing which is also done by Blink to reduce the impact on first load. But this should be good enough as an initial iteration.</p>\n<p dir=\"auto\">Note: why CRC32? Because we already have it in the dependencies (in <code class=\"notranslate\">zlib.h</code>), it's fast and can avoid enough collisions for this use case. We do have some existing hashing functions available via openssl but those won't be available on no-crypto builds. We can revisit if CRC32 turns out to be inadequate for this feature. We can also revisit the directory structure or use an actual db, but for now the file I/O cost doesn't really show up when I profile it locally. The remaining bottleneck is the repeated UTF8 encoding, which I plan to get rid of in a follow-up (because it needs to dance with monkey-patching).</p>\n<p dir=\"auto\">Refs: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1659280442\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/47472\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/47472/hovercard\" href=\"https://github.com/nodejs/node/issues/47472\">#47472</a></p>\n",
            "url": "https://github.com/nodejs/node/pull/52535",
            "title": "module: implement NODE_COMPILE_CACHE for automatic on-disk code caching",
            "date_modified": "2024-05-23T09:23:17.000Z",
            "date_published": "2024-04-15T05:42:39.000Z",
            "author": {
                "name": "joyeecheung",
                "url": "https://github.com/joyeecheung"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/38299977?u=88aefc5a0e292a8e7147d1941c70fcc8a4153da6&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52508.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2240830287\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/52508\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/52508/hovercard\" href=\"https://github.com/nodejs/node/issues/52508\">#52508</a></p>\n<p dir=\"auto\">This PR introduces a new CLI flag, <code class=\"notranslate\">--test-skip-pattern</code>.</p>\n<blockquote>\n<p dir=\"auto\">\"A regular expression that configures the test runner to only execute tests whose name don't match the provided pattern.\"</p>\n</blockquote>",
            "url": "https://github.com/nodejs/node/pull/52529",
            "title": "test_runner: add --test-skip-pattern cli option",
            "date_modified": "2024-05-02T07:28:05.000Z",
            "date_published": "2024-04-14T16:59:21.000Z",
            "author": {
                "name": "RedYetiDev",
                "url": "https://github.com/RedYetiDev"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/201101?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR doc-only deprecates the <code class=\"notranslate\">verbatim</code> option in <code class=\"notranslate\">dns.lookup</code> and <code class=\"notranslate\">dnsPromise.lookup</code> in favor to a new <code class=\"notranslate\">order</code> option, a string which supports the <code class=\"notranslate\">verbatim</code> (default), <code class=\"notranslate\">ipv4first</code> and <code class=\"notranslate\">ipv6first</code> values.</p>\n<p dir=\"auto\">I made it a tri-state string so that <code class=\"notranslate\">ipv6first</code> and be specified as well to solve issues like in the one linked below.</p>\n<p dir=\"auto\">The <code class=\"notranslate\">verbatim</code> option is still present but <code class=\"notranslate\">order</code> takes precedence over it.<br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52216.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2207445030\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/52216\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/52216/hovercard\" href=\"https://github.com/nodejs/node/issues/52216\">#52216</a>.</p>",
            "url": "https://github.com/nodejs/node/pull/52492",
            "title": "dns: add order option and support ipv6first",
            "date_modified": "2024-04-17T15:24:31.000Z",
            "date_published": "2024-04-12T09:16:23.000Z",
            "author": {
                "name": "ShogunPanda",
                "url": "https://github.com/ShogunPanda"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1935246?u=440932d4aed022e31a2140e1825c0167b7a12357&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><blockquote>\n<p dir=\"auto\">The work is mostly done by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/lemire/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/lemire\">@lemire</a>.</p>\n</blockquote>\n<p dir=\"auto\">Suggested changes improves the performance of base64 and base64url operations.</p>\n<h2 dir=\"auto\">Benchmarks</h2>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"                                                                                confidence improvement accuracy (*)   (**)  (***)\nbuffers/buffer-base64-decode-wrapped.js n=32 linesCount=524288 charsPerLine=76        ***    196.05 %       ±2.25% ±3.03% ±4.01%\nbuffers/buffer-base64-decode.js size=8388608 n=32                                     ***    218.27 %       ±3.45% ±4.65% ±6.16%\nbuffers/buffer-base64-encode.js n=32 len=67108864                                     ***      2.95 %       ±0.67% ±0.89% ±1.16%\nbuffers/buffer-base64url-decode.js size=8388608 n=32                                  ***    218.32 %       ±4.34% ±5.84% ±7.74%\nbuffers/buffer-base64url-encode.js n=32 len=67108864                                  ***    246.27 %       ±2.68% ±3.61% ±4.79%\n\nBe aware that when doing many comparisons the risk of a false-positive result increases.\nIn this case, there are 5 comparisons, you can thus expect the following amount of false-positive results:\n  0.25 false positives, when considering a   5% risk acceptance (*, **, ***),\n  0.05 false positives, when considering a   1% risk acceptance (**, ***),\n  0.01 false positives, when considering a 0.1% risk acceptance (***)\"><pre class=\"notranslate\"><code class=\"notranslate\">                                                                                confidence improvement accuracy (*)   (**)  (***)\nbuffers/buffer-base64-decode-wrapped.js n=32 linesCount=524288 charsPerLine=76        ***    196.05 %       ±2.25% ±3.03% ±4.01%\nbuffers/buffer-base64-decode.js size=8388608 n=32                                     ***    218.27 %       ±3.45% ±4.65% ±6.16%\nbuffers/buffer-base64-encode.js n=32 len=67108864                                     ***      2.95 %       ±0.67% ±0.89% ±1.16%\nbuffers/buffer-base64url-decode.js size=8388608 n=32                                  ***    218.32 %       ±4.34% ±5.84% ±7.74%\nbuffers/buffer-base64url-encode.js n=32 len=67108864                                  ***    246.27 %       ±2.68% ±3.61% ±4.79%\n\nBe aware that when doing many comparisons the risk of a false-positive result increases.\nIn this case, there are 5 comparisons, you can thus expect the following amount of false-positive results:\n  0.25 false positives, when considering a   5% risk acceptance (*, **, ***),\n  0.05 false positives, when considering a   1% risk acceptance (**, ***),\n  0.01 false positives, when considering a 0.1% risk acceptance (***)\n</code></pre></div>",
            "url": "https://github.com/nodejs/node/pull/52428",
            "title": "buffer: improve `base64` and `base64url` performance",
            "date_modified": "2024-04-12T02:50:27.000Z",
            "date_published": "2024-04-08T18:07:00.000Z",
            "author": {
                "name": "anonrig",
                "url": "https://github.com/anonrig"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/16746759?u=60fb76d4d645e86d42b147f009f2be0836a7317c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h1 dir=\"auto\">Benchmarks</h1>\n<p dir=\"auto\">even thought the following issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2198840296\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/build/issues/3657\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/build/issues/3657/hovercard?comment_id=204153499&amp;comment_type=issue_comment\" href=\"https://github.com/nodejs/build/issues/3657#issuecomment-204153499\">nodejs/build#3657 (comment)</a>, I ran 3 times to make sure it's consistent and it is</p>\n<h2 dir=\"auto\"><code class=\"notranslate\">AbortSignal.abort()</code> creation</h2>\n<p dir=\"auto\"><a href=\"https://ci.nodejs.org/view/Node.js%20benchmark/job/benchmark-node-micro-benchmarks/1508/console\" rel=\"nofollow\">Benchmark URL 1</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"                                                                              confidence improvement accuracy (*)    (**)   (***)\nabort_controller/abort-signal-static-abort.js kind='default-reason' n=5000000        ***     76.76 %       ±0.46%  ±0.62%  ±0.80%\nabort_controller/abort-signal-static-abort.js kind='same-reason' n=5000000           ***   2166.62 %      ±11.82% ±15.93% ±21.15%\"><pre class=\"notranslate\"><code class=\"notranslate\">                                                                              confidence improvement accuracy (*)    (**)   (***)\nabort_controller/abort-signal-static-abort.js kind='default-reason' n=5000000        ***     76.76 %       ±0.46%  ±0.62%  ±0.80%\nabort_controller/abort-signal-static-abort.js kind='same-reason' n=5000000           ***   2166.62 %      ±11.82% ±15.93% ±21.15%\n</code></pre></div>\n<p dir=\"auto\"><a href=\"https://ci.nodejs.org/view/Node.js%20benchmark/job/benchmark-node-micro-benchmarks/1516/console\" rel=\"nofollow\">Benchmark URL 2</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"                                                                              confidence improvement accuracy (*)    (**)   (***)\nabort_controller/abort-signal-static-abort.js kind='default-reason' n=5000000        ***     75.92 %       ±0.68%  ±0.90%  ±1.18%\nabort_controller/abort-signal-static-abort.js kind='same-reason' n=5000000           ***   2191.80 %      ±10.63% ±14.32% ±19.01%\"><pre class=\"notranslate\"><code class=\"notranslate\">                                                                              confidence improvement accuracy (*)    (**)   (***)\nabort_controller/abort-signal-static-abort.js kind='default-reason' n=5000000        ***     75.92 %       ±0.68%  ±0.90%  ±1.18%\nabort_controller/abort-signal-static-abort.js kind='same-reason' n=5000000           ***   2191.80 %      ±10.63% ±14.32% ±19.01%\n</code></pre></div>\n<p dir=\"auto\"><a href=\"https://ci.nodejs.org/view/Node.js%20benchmark/job/benchmark-node-micro-benchmarks/1518/console\" rel=\"nofollow\">Benchmark URL 3</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"                                                                              confidence improvement accuracy (*)    (**)   (***)\nabort_controller/abort-signal-static-abort.js kind='default-reason' n=5000000        ***     75.79 %       ±0.45%  ±0.60%  ±0.79%\nabort_controller/abort-signal-static-abort.js kind='same-reason' n=5000000           ***   2192.39 %      ±26.46% ±35.66% ±47.34%\"><pre class=\"notranslate\"><code class=\"notranslate\">                                                                              confidence improvement accuracy (*)    (**)   (***)\nabort_controller/abort-signal-static-abort.js kind='default-reason' n=5000000        ***     75.79 %       ±0.45%  ±0.60%  ±0.79%\nabort_controller/abort-signal-static-abort.js kind='same-reason' n=5000000           ***   2192.39 %      ±26.46% ±35.66% ±47.34%\n</code></pre></div>\n<h2 dir=\"auto\">Test runner Benchmark</h2>\n<p dir=\"auto\">My original intent was to improve this so this is why I ran this</p>\n<p dir=\"auto\"><a href=\"https://ci.nodejs.org/view/Node.js%20benchmark/job/benchmark-node-micro-benchmarks/1507/console\" rel=\"nofollow\">Benchmark URL</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"                                                                                                     confidence improvement accuracy (*)   (**)   (***)\ntest_runner/global-concurrent-tests.js type='async' n=100                                                           3.46 %       ±4.37% ±5.81%  ±7.57%\ntest_runner/global-concurrent-tests.js type='async' n=1000                                                 ***      5.92 %       ±2.26% ±3.03%  ±3.97%\ntest_runner/global-concurrent-tests.js type='async' n=10000                                                ***     15.70 %       ±0.55% ±0.73%  ±0.96%\ntest_runner/global-concurrent-tests.js type='sync' n=100                                                    **      3.89 %       ±2.47% ±3.29%  ±4.29%\ntest_runner/global-concurrent-tests.js type='sync' n=1000                                                  ***      5.00 %       ±1.82% ±2.44%  ±3.21%\ntest_runner/global-concurrent-tests.js type='sync' n=10000                                                 ***     15.41 %       ±0.39% ±0.52%  ±0.68%\ntest_runner/global-sequential-tests.js type='async' n=100                                                           6.22 %       ±7.36% ±9.81% ±12.78%\ntest_runner/global-sequential-tests.js type='async' n=1000                                                          2.51 %       ±5.83% ±7.77% ±10.12%\ntest_runner/global-sequential-tests.js type='async' n=10000                                                         0.00 %       ±2.77% ±3.68%  ±4.79%\ntest_runner/global-sequential-tests.js type='sync' n=100                                                            1.06 %       ±4.42% ±5.90%  ±7.70%\ntest_runner/global-sequential-tests.js type='sync' n=1000                                                           0.13 %       ±3.39% ±4.51%  ±5.88%\ntest_runner/global-sequential-tests.js type='sync' n=10000                                                         -3.01 %       ±3.11% ±4.14%  ±5.39%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=10 numberOfSuites=10            ***      5.77 %       ±2.99% ±4.01%  ±5.27%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=10 numberOfSuites=100           ***     12.06 %       ±0.71% ±0.94%  ±1.23%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=100 numberOfSuites=10           ***      9.29 %       ±1.05% ±1.40%  ±1.83%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=100 numberOfSuites=100          ***     15.06 %       ±0.38% ±0.50%  ±0.65%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=1000 numberOfSuites=10          ***     16.90 %       ±1.59% ±2.15%  ±2.84%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=1000 numberOfSuites=100         ***     17.62 %       ±1.01% ±1.35%  ±1.79%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=10 numberOfSuites=10                      3.59 %       ±4.91% ±6.54%  ±8.51%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=10 numberOfSuites=100            ***     11.88 %       ±0.78% ±1.04%  ±1.36%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=100 numberOfSuites=10            ***     10.44 %       ±1.64% ±2.20%  ±2.89%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=100 numberOfSuites=100           ***     15.72 %       ±0.51% ±0.68%  ±0.88%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=1000 numberOfSuites=10           ***     18.30 %       ±1.72% ±2.32%  ±3.07%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=1000 numberOfSuites=100          ***     17.40 %       ±1.26% ±1.70%  ±2.25%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=10 numberOfSuites=10             *      4.00 %       ±3.31% ±4.41%  ±5.74%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=10 numberOfSuites=100          ***     10.96 %       ±0.66% ±0.87%  ±1.14%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=100 numberOfSuites=10          ***      9.11 %       ±0.79% ±1.05%  ±1.37%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=100 numberOfSuites=100         ***     16.58 %       ±0.42% ±0.56%  ±0.73%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=1000 numberOfSuites=10         ***     16.72 %       ±0.40% ±0.53%  ±0.70%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=1000 numberOfSuites=100        ***     15.42 %       ±0.19% ±0.26%  ±0.33%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=10 numberOfSuites=10            ***      6.09 %       ±1.99% ±2.65%  ±3.47%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=10 numberOfSuites=100           ***      9.95 %       ±1.28% ±1.71%  ±2.22%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=100 numberOfSuites=10           ***      9.46 %       ±1.58% ±2.10%  ±2.73%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=100 numberOfSuites=100          ***     16.19 %       ±0.47% ±0.63%  ±0.81%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=1000 numberOfSuites=10          ***     17.06 %       ±0.25% ±0.33%  ±0.43%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=1000 numberOfSuites=100         ***     15.00 %       ±0.17% ±0.23%  ±0.30%\n\nBe aware that when doing many comparisons the risk of a false-positive\nresult increases. In this case, there are 36 comparisons, you can thus\nexpect the following amount of false-positive results:\n1.80 false positives, when considering a   5% risk acceptance (*, **, ***),\n0.36 false positives, when considering a   1% risk acceptance (**, ***),\n0.04 false positives, when considering a 0.1% risk acceptance (***)\"><pre class=\"notranslate\"><code class=\"notranslate\">                                                                                                     confidence improvement accuracy (*)   (**)   (***)\ntest_runner/global-concurrent-tests.js type='async' n=100                                                           3.46 %       ±4.37% ±5.81%  ±7.57%\ntest_runner/global-concurrent-tests.js type='async' n=1000                                                 ***      5.92 %       ±2.26% ±3.03%  ±3.97%\ntest_runner/global-concurrent-tests.js type='async' n=10000                                                ***     15.70 %       ±0.55% ±0.73%  ±0.96%\ntest_runner/global-concurrent-tests.js type='sync' n=100                                                    **      3.89 %       ±2.47% ±3.29%  ±4.29%\ntest_runner/global-concurrent-tests.js type='sync' n=1000                                                  ***      5.00 %       ±1.82% ±2.44%  ±3.21%\ntest_runner/global-concurrent-tests.js type='sync' n=10000                                                 ***     15.41 %       ±0.39% ±0.52%  ±0.68%\ntest_runner/global-sequential-tests.js type='async' n=100                                                           6.22 %       ±7.36% ±9.81% ±12.78%\ntest_runner/global-sequential-tests.js type='async' n=1000                                                          2.51 %       ±5.83% ±7.77% ±10.12%\ntest_runner/global-sequential-tests.js type='async' n=10000                                                         0.00 %       ±2.77% ±3.68%  ±4.79%\ntest_runner/global-sequential-tests.js type='sync' n=100                                                            1.06 %       ±4.42% ±5.90%  ±7.70%\ntest_runner/global-sequential-tests.js type='sync' n=1000                                                           0.13 %       ±3.39% ±4.51%  ±5.88%\ntest_runner/global-sequential-tests.js type='sync' n=10000                                                         -3.01 %       ±3.11% ±4.14%  ±5.39%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=10 numberOfSuites=10            ***      5.77 %       ±2.99% ±4.01%  ±5.27%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=10 numberOfSuites=100           ***     12.06 %       ±0.71% ±0.94%  ±1.23%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=100 numberOfSuites=10           ***      9.29 %       ±1.05% ±1.40%  ±1.83%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=100 numberOfSuites=100          ***     15.06 %       ±0.38% ±0.50%  ±0.65%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=1000 numberOfSuites=10          ***     16.90 %       ±1.59% ±2.15%  ±2.84%\ntest_runner/suite-tests.js concurrency='no' testType='async' testsPerSuite=1000 numberOfSuites=100         ***     17.62 %       ±1.01% ±1.35%  ±1.79%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=10 numberOfSuites=10                      3.59 %       ±4.91% ±6.54%  ±8.51%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=10 numberOfSuites=100            ***     11.88 %       ±0.78% ±1.04%  ±1.36%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=100 numberOfSuites=10            ***     10.44 %       ±1.64% ±2.20%  ±2.89%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=100 numberOfSuites=100           ***     15.72 %       ±0.51% ±0.68%  ±0.88%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=1000 numberOfSuites=10           ***     18.30 %       ±1.72% ±2.32%  ±3.07%\ntest_runner/suite-tests.js concurrency='no' testType='sync' testsPerSuite=1000 numberOfSuites=100          ***     17.40 %       ±1.26% ±1.70%  ±2.25%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=10 numberOfSuites=10             *      4.00 %       ±3.31% ±4.41%  ±5.74%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=10 numberOfSuites=100          ***     10.96 %       ±0.66% ±0.87%  ±1.14%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=100 numberOfSuites=10          ***      9.11 %       ±0.79% ±1.05%  ±1.37%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=100 numberOfSuites=100         ***     16.58 %       ±0.42% ±0.56%  ±0.73%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=1000 numberOfSuites=10         ***     16.72 %       ±0.40% ±0.53%  ±0.70%\ntest_runner/suite-tests.js concurrency='yes' testType='async' testsPerSuite=1000 numberOfSuites=100        ***     15.42 %       ±0.19% ±0.26%  ±0.33%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=10 numberOfSuites=10            ***      6.09 %       ±1.99% ±2.65%  ±3.47%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=10 numberOfSuites=100           ***      9.95 %       ±1.28% ±1.71%  ±2.22%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=100 numberOfSuites=10           ***      9.46 %       ±1.58% ±2.10%  ±2.73%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=100 numberOfSuites=100          ***     16.19 %       ±0.47% ±0.63%  ±0.81%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=1000 numberOfSuites=10          ***     17.06 %       ±0.25% ±0.33%  ±0.43%\ntest_runner/suite-tests.js concurrency='yes' testType='sync' testsPerSuite=1000 numberOfSuites=100         ***     15.00 %       ±0.17% ±0.23%  ±0.30%\n\nBe aware that when doing many comparisons the risk of a false-positive\nresult increases. In this case, there are 36 comparisons, you can thus\nexpect the following amount of false-positive results:\n1.80 false positives, when considering a   5% risk acceptance (*, **, ***),\n0.36 false positives, when considering a   1% risk acceptance (**, ***),\n0.04 false positives, when considering a 0.1% risk acceptance (***)\n</code></pre></div>",
            "url": "https://github.com/nodejs/node/pull/52408",
            "title": "lib: improve perf of `AbortSignal` creation",
            "date_modified": "2024-04-17T20:00:52.000Z",
            "date_published": "2024-04-07T19:32:29.000Z",
            "author": {
                "name": "rluvaton",
                "url": "https://github.com/rluvaton"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3109072?u=a2f71b4e0a61161b88f81b2ed09682f3379d1d60&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This introduces a doc-only deprecation of using GCM authentication tags that are shorter than the cipher's block size, unless the user specified the <code class=\"notranslate\">authTagLength</code> option.</p>\n<p dir=\"auto\">Refs: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2220954203\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/52327\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/52327/hovercard\" href=\"https://github.com/nodejs/node/issues/52327\">#52327</a></p>\n",
            "url": "https://github.com/nodejs/node/pull/52345",
            "title": "crypto: deprecate implicitly shortened GCM tags",
            "date_modified": "2024-04-10T08:16:37.000Z",
            "date_published": "2024-04-03T13:58:29.000Z",
            "author": {
                "name": "tniessen",
                "url": "https://github.com/tniessen"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1935246?u=440932d4aed022e31a2140e1825c0167b7a12357&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><blockquote>\n<p dir=\"auto\">This is a more up to date implementation of <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/joyeecheung/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/joyeecheung\">@joyeecheung</a>'s original <a href=\"https://github.com/nodejs/node/pull/46534\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/46534/hovercard\">pull-request</a>.</p>\n</blockquote>\n<p dir=\"auto\">Co-authored-by: Daniel Lemire</p>\n<p dir=\"auto\">The purpose of this pull-request to offer a fast alternative to <code class=\"notranslate\">npm run xxx</code>. With this pull-request, node supports <code class=\"notranslate\">node run test</code> which executes <code class=\"notranslate\">test</code> command inside <code class=\"notranslate\">package.json</code> scripts.</p>\n<p dir=\"auto\">Locally the overhead that <code class=\"notranslate\">node run &lt;cmd&gt;</code> adds to running <code class=\"notranslate\">cmd</code> is ~200ms less than <code class=\"notranslate\">npm run &lt;cmd&gt;</code></p>\n<h2 dir=\"auto\">TODO</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add documentation</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add tests</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add <code class=\"notranslate\">node_modules/.bin</code> to PATH.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Pass additional arguments to <code class=\"notranslate\">execSync</code></li>\n</ul>\n<h2 dir=\"auto\">Benchmark</h2>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"❯ hyperfine './out/Release/node run test' 'npm run test' -i\nBenchmark 1: ./out/Release/node run test\n  Time (mean ± σ):      29.3 ms ±   1.1 ms    [User: 23.2 ms, System: 3.1 ms]\n  Range (min … max):    27.6 ms …  33.2 ms    97 runs\n\n  Warning: Ignoring non-zero exit code.\n\nBenchmark 2: npm run test\n  Time (mean ± σ):     185.7 ms ±   9.2 ms    [User: 136.7 ms, System: 30.3 ms]\n  Range (min … max):   174.7 ms … 212.9 ms    15 runs\n\n  Warning: Ignoring non-zero exit code.\n\nSummary\n  ./out/Release/node run test ran\n    6.34 ± 0.40 times faster than npm run test\"><pre class=\"notranslate\"><code class=\"notranslate\">❯ hyperfine './out/Release/node run test' 'npm run test' -i\nBenchmark 1: ./out/Release/node run test\n  Time (mean ± σ):      29.3 ms ±   1.1 ms    [User: 23.2 ms, System: 3.1 ms]\n  Range (min … max):    27.6 ms …  33.2 ms    97 runs\n\n  Warning: Ignoring non-zero exit code.\n\nBenchmark 2: npm run test\n  Time (mean ± σ):     185.7 ms ±   9.2 ms    [User: 136.7 ms, System: 30.3 ms]\n  Range (min … max):   174.7 ms … 212.9 ms    15 runs\n\n  Warning: Ignoring non-zero exit code.\n\nSummary\n  ./out/Release/node run test ran\n    6.34 ± 0.40 times faster than npm run test\n</code></pre></div>",
            "url": "https://github.com/nodejs/node/pull/52190",
            "title": "cli: implement `node --run <script-in-package-json>`",
            "date_modified": "2024-06-17T08:39:15.000Z",
            "date_published": "2024-03-22T21:43:13.000Z",
            "author": {
                "name": "anonrig",
                "url": "https://github.com/anonrig"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/391987?u=7cb0ae14730ed720e1e8cd269f17cdd1638f38e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This updates simdutf to version 5.0.0: <a href=\"https://github.com/simdutf/simdutf/releases/tag/v5.0.0\">https://github.com/simdutf/simdutf/releases/tag/v5.0.0</a></p>\n<p dir=\"auto\">The main reason for this update is to get support for an accelerated Base64 codec (see <a href=\"https://github.com/simdutf/simdutf/?tab=readme-ov-file#base64\">https://github.com/simdutf/simdutf/?tab=readme-ov-file#base64</a>). This should help with the following issues:</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1958000178\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/performance/issues/128\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/performance/issues/128/hovercard\" href=\"https://github.com/nodejs/performance/issues/128\">nodejs/performance#128</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"868694279\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/38433\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/38433/hovercard\" href=\"https://github.com/nodejs/node/pull/38433\">#38433</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2119187806\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/51670\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/51670/hovercard\" href=\"https://github.com/nodejs/node/pull/51670\">#51670</a></li>\n</ul>",
            "url": "https://github.com/nodejs/node/pull/52138",
            "title": "deps: update simdutf to 5.0.0",
            "date_modified": "2024-03-20T17:44:39.000Z",
            "date_published": "2024-03-18T17:39:50.000Z",
            "author": {
                "name": "lemire",
                "url": "https://github.com/lemire"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7000710?u=9529bd132769a1928a5c15808d0a18c525f09762&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Description for changelog: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2189296465\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/52104\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/52104/hovercard?comment_id=2066201571&amp;comment_type=issue_comment\" href=\"https://github.com/nodejs/node/pull/52104#issuecomment-2066201571\">#52104 (comment)</a></p>\n<hr>\n<p dir=\"auto\">This patch removes support for the <code class=\"notranslate\">assert</code> keyword for import attributes. It was an old variant of the proposal that was only shipped in V8 and no other<br>\nengine, and that has then been replaced by the <code class=\"notranslate\">with</code> keyword.</p>\n<p dir=\"auto\">Chrome is planning to remove support for <code class=\"notranslate\">assert</code><br>\nin version 126, which will be released in June.</p>\n<p dir=\"auto\">Node.js already supports the <code class=\"notranslate\">with</code> keyword for<br>\nimport attributes, and this patch does not change that.</p>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51622.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2110612949\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/51622\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/51622/hovercard\" href=\"https://github.com/nodejs/node/issues/51622\">#51622</a></p>",
            "url": "https://github.com/nodejs/node/pull/52104",
            "title": "esm: drop support for import assertions",
            "date_modified": "2024-04-25T04:25:26.000Z",
            "date_published": "2024-03-15T19:06:10.000Z",
            "author": {
                "name": "nicolo-ribaudo",
                "url": "https://github.com/nicolo-ribaudo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8221854?u=656e1eb9ee161eedbd253bebb625d523b191a8a3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>",
            "url": "https://github.com/nodejs/node/pull/52074",
            "title": "watch: mark as stable",
            "date_modified": "2024-04-25T06:43:42.000Z",
            "date_published": "2024-03-13T13:02:49.000Z",
            "author": {
                "name": "MoLow",
                "url": "https://github.com/MoLow"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3065230?u=0e938c0e3fcdc4998886799c5bc247ea8d17714a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">NOTEABLE CHANGE: Increase the default highWaterMark for streams. This provides a performance boost across the board at the cost of slightly higher memory usage. Users in memory sensitive environments are encouraged to explicitly set <code class=\"notranslate\">setDefaultHighWaterMark</code>.</p>\n<p dir=\"auto\">This should give a performance boost accross the board.</p>\n<p dir=\"auto\">Given that the old limit is a decod old and memory capacity has doubled many times since I think it is appropriate to slightly bump the default limit.</p>\n<p dir=\"auto\">Refs: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1579856724\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/46608\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/46608/hovercard\" href=\"https://github.com/nodejs/node/pull/46608\">#46608</a><br>\nRefs: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1935308355\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/50120\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/50120/hovercard\" href=\"https://github.com/nodejs/node/pull/50120\">#50120</a></p>\n",
            "url": "https://github.com/nodejs/node/pull/52037",
            "title": "stream: bump default highWaterMark",
            "date_modified": "2024-03-17T07:53:16.000Z",
            "date_published": "2024-03-10T18:23:46.000Z",
            "author": {
                "name": "ronag",
                "url": "https://github.com/ronag"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/21155906?u=3d89598abadbba249a3db64bdda9957218ca16ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Add <code class=\"notranslate\">uv_get_available_memory</code> to <code class=\"notranslate\">Diagnostic Report</code> and <code class=\"notranslate\">process</code>.<br>\ncc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/joyeecheung/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/joyeecheung\">@joyeecheung</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/bnoordhuis/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bnoordhuis\">@bnoordhuis</a></p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> <code class=\"notranslate\">make -j4 test</code> (UNIX), or <code class=\"notranslate\">vcbuild test</code> (Windows) passes</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> tests and/or benchmarks are included</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> documentation is changed or added</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> commit message follows <a href=\"https://github.com/nodejs/node/blob/master/doc/guides/contributing/pull-requests.md#commit-message-guidelines\">commit guidelines</a></li>\n</ul>",
            "url": "https://github.com/nodejs/node/pull/52023",
            "title": "src: add uv_get_available_memory to report and process",
            "date_modified": "2024-03-13T04:06:52.000Z",
            "date_published": "2024-03-09T06:23:43.000Z",
            "author": {
                "name": "theanarkh",
                "url": "https://github.com/theanarkh"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4299420?u=d7eb2cf3db5f2a4df73a8f719c2e9e3d648e4e43&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h4 dir=\"auto\">Summary</h4>\n<p dir=\"auto\">This patch adds <code class=\"notranslate\">require()</code> support for synchronous ESM graphs under<br>\nthe flag <code class=\"notranslate\">--experimental-require-module</code></p>\n<p dir=\"auto\">This is based on the the following design aspect of ESM:</p>\n<ul dir=\"auto\">\n<li>The resolution can be synchronous (up to the host)</li>\n<li>The evaluation of a synchronous graph (without top-level await) is<br>\nalso synchronous, and, by the time the module graph is instantiated<br>\n(before evaluation starts), this is is already known.</li>\n</ul>\n<p dir=\"auto\">If <code class=\"notranslate\">--experimental-require-module</code> is enabled, and the ECMAScript<br>\nmodule being loaded by <code class=\"notranslate\">require()</code> meets the following requirements:</p>\n<ul dir=\"auto\">\n<li>Explicitly marked as an ES module with a <code class=\"notranslate\">\"type\": \"module\"</code> field in<br>\nthe closest package.json or a <code class=\"notranslate\">.mjs</code> extension.</li>\n<li>Fully synchronous (contains no top-level <code class=\"notranslate\">await</code>).</li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">require()</code> will load the requested module as an ES Module, and return<br>\nthe module name space object. In this case it is similar to dynamic<br>\n<code class=\"notranslate\">import()</code> but is run synchronously and returns the name space object<br>\ndirectly.</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// point.mjs\nexport function distance(a, b) { return (b.x - a.x) ** 2 + (b.y - a.y) ** 2; }\nclass Point {\n  constructor(x, y) { this.x = x; this.y = y; }\n}\nexport default Point;\"><pre class=\"notranslate\"><span class=\"pl-c\">// point.mjs</span>\n<span class=\"pl-k\">export</span> <span class=\"pl-k\">function</span> <span class=\"pl-en\">distance</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">a</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">b</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-k\">return</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">b</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">x</span> <span class=\"pl-c1\">-</span> <span class=\"pl-s1\">a</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">x</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">**</span> <span class=\"pl-c1\">2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">b</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">y</span> <span class=\"pl-c1\">-</span> <span class=\"pl-s1\">a</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">y</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">**</span> <span class=\"pl-c1\">2</span><span class=\"pl-kos\">;</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Point</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-en\">constructor</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">x</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">y</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">x</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">x</span><span class=\"pl-kos\">;</span> <span class=\"pl-smi\">this</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">y</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">y</span><span class=\"pl-kos\">;</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">export</span> <span class=\"pl-k\">default</span> <span class=\"pl-v\">Point</span><span class=\"pl-kos\">;</span></pre></div>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"// main.js\nconst required = require('./point.mjs');\n// [Module: null prototype] {\n//   default: [class Point],\n//   distance: [Function: distance]\n// }\nconsole.log(required);\n\n(async () =&gt; {\n  const imported = await import('./point.mjs');\n  console.log(imported === required);  // true\n})();\"><pre class=\"notranslate\"><span class=\"pl-c\">// main.js</span>\n<span class=\"pl-k\">const</span> <span class=\"pl-s1\">required</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">require</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'./point.mjs'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-c\">// [Module: null prototype] {</span>\n<span class=\"pl-c\">//   default: [class Point],</span>\n<span class=\"pl-c\">//   distance: [Function: distance]</span>\n<span class=\"pl-c\">// }</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">required</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n\n<span class=\"pl-kos\">(</span><span class=\"pl-k\">async</span> <span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-k\">const</span> <span class=\"pl-s1\">imported</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">await</span> <span class=\"pl-k\">import</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'./point.mjs'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n  <span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">imported</span> <span class=\"pl-c1\">===</span> <span class=\"pl-s1\">required</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>  <span class=\"pl-c\">// true</span>\n<span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span></pre></div>\n<p dir=\"auto\">If the module being <code class=\"notranslate\">require()</code>'d contains top-level <code class=\"notranslate\">await</code>, or the module<br>\ngraph it <code class=\"notranslate\">import</code>s contains top-level <code class=\"notranslate\">await</code>,<br>\n<code class=\"notranslate\">ERR_REQUIRE_ASYNC_MODULE</code> will be thrown. In this case, users should<br>\nload the asynchronous module using <code class=\"notranslate\">import()</code>.</p>\n<p dir=\"auto\">If <code class=\"notranslate\">--experimental-print-required-tla</code> is enabled, instead of throwing<br>\n<code class=\"notranslate\">ERR_REQUIRE_ASYNC_MODULE</code> before evaluation, Node.js will evaluate the<br>\nmodule, try to locate the top-level awaits, and print their location to<br>\nhelp users find them.</p>\n<h4 dir=\"auto\">Background</h4>\n<p dir=\"auto\">There were some previous discussions about this idea back in 2019 (e.g. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1878168576\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/49450\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/49450/hovercard\" href=\"https://github.com/nodejs/node/issues/49450\">#49450</a>). I I didn't go through all of them, but in 2024 I believe we can agree that not supporting <code class=\"notranslate\">require(esm)</code> is creating enough pain for our users that we should really deprioritize the drawbacks of it. A non-perfect solution is still better than having nothing at all IMO.</p>\n<p dir=\"auto\">There was a previous attempt in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"536021102\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/30891\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/30891/hovercard\" href=\"https://github.com/nodejs/node/pull/30891\">#30891</a> which tried to support TLA from the start and thus needed to run the event loop recursively, which would be unsafe and therefore it was closed (synchronous-only <code class=\"notranslate\">require(esm)</code> was brought up in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"536021102\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/30891\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/nodejs/node/pull/30891/hovercard?comment_id=565604651&amp;comment_type=issue_comment\" href=\"https://github.com/nodejs/node/pull/30891#issuecomment-565604651\">#30891 (comment)</a> but the PR didn't end up going that way). I have the impression that there were some other attempts before, but non active AFAIK.</p>\n<p dir=\"auto\">This PR tries to keep it simple - only load ESM synchronously when we know it's synchronous (which is part of the design of ESM and is supported by the V8 API), and if it contains TLA, we throw. That should at least address the majority of use cases of ESM (TLA in a module that's supposed to be import'ed is already not a great idea, they are more meant for entry points. If they are really needed, users can use <code class=\"notranslate\">import()</code> to make that asynchronicity explicit).</p>\n<p dir=\"auto\">When I was refactoring the module loader implementation and touching the V8 Module API to fix other issues, this idea appears to be natural to me (since ESM is really designed to have this synchronocity in mind) and does not actually need that much work in 2024 (er, with some refactorings that I already did for other issues at least..), so here is another attempt at it.</p>\n<h4 dir=\"auto\">Motivation</h4>\n<p dir=\"auto\">The motivation for this is probably obvious, but I'll give my take again in case there are unfamiliar readers: CJS/ESM interop would always be done on a best-effort basis and they should not be mixed if avoidable, but today <a href=\"https://github.com/wooorm/npm-esm-vs-cjs\">the majority of the popular packages out there in the registry are still CJS</a>. There needs to be an escape hatch for simple cases while the transition happens.</p>\n<p dir=\"auto\">With <code class=\"notranslate\">require(esm)</code>, when a dependency goes ESM-only, it is less likely to be a breaking change for users as long as it's a synchronous ESM (with no top-level await), which should be the case most of the time. This helps package authors transition to ESM without worrying about user experience, or having to release it as dual module which bloats the <code class=\"notranslate\">node_modules</code> size even further and leads to identity problems due to the duplication.</p>\n<p dir=\"auto\">The design of ESM already ensures that synchronous evaluation and therefore interop with CJS for a synchronous graph is possible (e.g. see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"422887866\" data-permission-text=\"Title is private\" data-url=\"https://github.com/tc39/proposal-top-level-await/issues/61\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/tc39/proposal-top-level-await/pull/61/hovercard\" href=\"https://github.com/tc39/proposal-top-level-await/pull/61\">tc39/proposal-top-level-await#61</a>), and we won't be alone in restricting TLA for certain features(e.g. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"445870405\" data-permission-text=\"Title is private\" data-url=\"https://github.com/w3c/ServiceWorker/issues/1407\" data-hovercard-type=\"issue\" data-hovercard-url=\"/w3c/ServiceWorker/issues/1407/hovercard\" href=\"https://github.com/w3c/ServiceWorker/issues/1407\">w3c/ServiceWorker#1407</a> service workers on the web also disallows TLA) it would be a shame not to make use of that. Ongoing proposal like <a href=\"https://github.com/tc39/proposal-defer-import-eval\">import defer</a> could also help addressing the lazy-loading needs without breaking the synchronous aspect of ESM.</p>\n<h4 dir=\"auto\">TODOs</h4>\n<p dir=\"auto\">There are still some feature interactions that this implementation doesn't handle (e.g. <code class=\"notranslate\">--experimental-detect-module</code> or <code class=\"notranslate\">--experimental-loader</code> or <code class=\"notranslate\">--experimental-wasm-modules</code>). Some edge cases involving cycles probably would have undefined behaviors. I don't think this needs to handle interactions with everything (especially other experimental features) perfectly to land as a first iteration of an experimental feature. We can continue iterating on it while it's experimental.</p>\n",
            "url": "https://github.com/nodejs/node/pull/51977",
            "title": "module: support require()ing synchronous ESM graphs",
            "date_modified": "2024-06-17T18:16:54.000Z",
            "date_published": "2024-03-05T18:08:33.000Z",
            "author": {
                "name": "joyeecheung",
                "url": "https://github.com/joyeecheung"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4299420?u=d7eb2cf3db5f2a4df73a8f719c2e9e3d648e4e43&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is similar to the <a href=\"https://developer.chrome.com/docs/devtools/console/utilities#queryObjects-function\" rel=\"nofollow\"><code class=\"notranslate\">queryObjects()</code> console API</a> provided by the Chromium DevTools console. It can be used to search for objects that have the matching constructor on its prototype chain in the heap after a full garbage collection, which can be useful for memory leak regression tests.<br>\nTo avoid surprising results, users should avoid using this API on constructors whose implementation they don't control, or on constructors that can be invoked by other parties in the application.</p>\n<p dir=\"auto\">To avoid accidental leaks, this API does not return raw references to the objects found. By default, it returns the count of the objects found. If <code class=\"notranslate\">options.format</code> is <code class=\"notranslate\">'summary'</code>, it returns an array containing brief string representations for each object. The visibility provided in this API is similar to what the heap snapshot provides, while users can save the cost of serialization and parsing and directly filer the target objects during the search.</p>\n<p dir=\"auto\">We have been using this API internally for the test suite, which has been more stable than any other leak regression testing strategies in the CI. With a public implementation we can now use the public API instead.</p>\n<div class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"const { queryObjects } = require('node:v8');\nclass A { foo = 'bar'; }\nconsole.log(queryObjects(A)); // 0\nlet a = new A();\nconsole.log(queryObjects(A)); // 1\n// [ &quot;A { foo: 'bar' }&quot; ]\nconsole.log(queryObjects(A, { format: 'summary' }));\n\n// Release the object.\na = null;\n// Search again. queryObjects() includes a full garbage collection\n// so a should disappear.\nconsole.log(queryObjects(A)); // 0\n\nclass B extends A { bar = 'qux'; }\n// The child class B's prototype has A's prototype on its prototype chain\n// so the prototype object shows up too.\nconsole.log(queryObjects(A, { format: 'summary' })); // [ A {}' ]\"><pre class=\"notranslate\"><span class=\"pl-k\">const</span> <span class=\"pl-kos\">{</span> queryObjects <span class=\"pl-kos\">}</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">require</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'node:v8'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">A</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">foo</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'bar'</span><span class=\"pl-kos\">;</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">queryObjects</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">A</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span> <span class=\"pl-c\">// 0</span>\n<span class=\"pl-k\">let</span> <span class=\"pl-s1\">a</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-v\">A</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">queryObjects</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">A</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span> <span class=\"pl-c\">// 1</span>\n<span class=\"pl-c\">// [ \"A { foo: 'bar' }\" ]</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">queryObjects</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">A</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">format</span>: <span class=\"pl-s\">'summary'</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n\n<span class=\"pl-c\">// Release the object.</span>\n<span class=\"pl-s1\">a</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">null</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-c\">// Search again. queryObjects() includes a full garbage collection</span>\n<span class=\"pl-c\">// so a should disappear.</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">queryObjects</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">A</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span> <span class=\"pl-c\">// 0</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">B</span> <span class=\"pl-k\">extends</span> <span class=\"pl-v\">A</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">bar</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'qux'</span><span class=\"pl-kos\">;</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-c\">// The child class B's prototype has A's prototype on its prototype chain</span>\n<span class=\"pl-c\">// so the prototype object shows up too.</span>\n<span class=\"pl-smi\">console</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">queryObjects</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">A</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">format</span>: <span class=\"pl-s\">'summary'</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span> <span class=\"pl-c\">// [ A {}' ]</span></pre></div>\n",
            "url": "https://github.com/nodejs/node/pull/51927",
            "title": "v8: implement v8.queryObjects() for memory leak regression testing",
            "date_modified": "2024-05-08T03:26:09.000Z",
            "date_published": "2024-02-29T15:55:05.000Z",
            "author": {
                "name": "joyeecheung",
                "url": "https://github.com/joyeecheung"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8221854?u=656e1eb9ee161eedbd253bebb625d523b191a8a3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #40731.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1045899214\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/40731\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/40731/hovercard\" href=\"https://github.com/nodejs/node/issues/40731\">#40731</a><br>\nThis PR introduces <code class=\"notranslate\">fs.glob</code>and <code class=\"notranslate\">fsPromises.glob</code>.</p>",
            "url": "https://github.com/nodejs/node/pull/51912",
            "title": "fs: expose glob and globSync",
            "date_modified": "2024-06-17T08:36:52.000Z",
            "date_published": "2024-02-28T13:05:02.000Z",
            "author": {
                "name": "MoLow",
                "url": "https://github.com/MoLow"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/33763729?u=7d8cfc0ed4593b0f3d3e320dcee2941c7b6c7ecb&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR aims to add support for typed arrays in streams, addressing this issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2129438776\" data-permission-text=\"Title is private\" data-url=\"https://github.com/nodejs/node/issues/51728\" data-hovercard-type=\"issue\" data-hovercard-url=\"/nodejs/node/issues/51728/hovercard\" href=\"https://github.com/nodejs/node/issues/51728\">#51728</a><br>\ncc: @nodejs/streams</p>",
            "url": "https://github.com/nodejs/node/pull/51866",
            "title": "stream: support typed arrays",
            "date_modified": "2024-06-17T10:01:43.000Z",
            "date_published": "2024-02-24T23:56:49.000Z",
            "author": {
                "name": "IlyasShabi",
                "url": "https://github.com/IlyasShabi"
            }
        }
    ]
}