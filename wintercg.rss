<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://azu.github.io/github-search-rss/wintercg.rss</id>
    <title>org:wintercg Issues</title>
    <updated>2025-02-16T15:01:14.468Z</updated>
    <generator>github-search-rss</generator>
    <link rel="alternate" href="https://azu.github.io/github-search-rss/wintercg.rss"/>
    <subtitle>org:wintercg Issues on GitHub</subtitle>
    <rights>github-search-rss</rights>
    <entry>
        <title type="html"><![CDATA[Adding URLPattern]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/79</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/79"/>
        <updated>2025-02-08T16:41:12.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/439929?u=88483145a53c3d594ab68146c1a8bdecc3bcd1d3&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Node.js has recently added <code class="notranslate">URLPattern</code>. This makes at least three non-browser runtimes that support it:</p>
<ul dir="auto">
<li>Node.js - Supported</li>
<li>Deno - Supported</li>
<li>Cloudflare Workers - Supported</li>
<li>Bun - Unsupported</li>
</ul>
<p dir="auto">While <code class="notranslate">URLPattern</code> definitely has it's issues that make it less than ideal for broad use in non-browser runtimes, it is a web platform standard API.</p>
<p dir="auto">Proposing that we add it the minimum common.</p>]]></content>
        <author>
            <name>jasnell</name>
            <email>jasnell@noreply.github.com</email>
            <uri>https://github.com/jasnell</uri>
        </author>
        <published>2025-02-08T16:41:12.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Allow cookie related headers in incoming requests]]></title>
        <id>https://github.com/wintercg/fetch-workstream/issues/4</id>
        <link href="https://github.com/wintercg/fetch-workstream/issues/4"/>
        <updated>2025-02-07T10:42:01.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/7829205?u=280fa15bf97605fa9a7a1d331327485daaad7871&v=4" width="64" height="64" alt=""/><br/><p dir="auto">On the web, the <code class="notranslate">set-cookie</code> and <code class="notranslate">set-cookie2</code> are stripped from incoming responses when a response is shown to the user. For servers, this does not make sense because they do not have a cookie jar that would automatically handle these cookies.</p>
<p dir="auto">We should allow reading these headers.</p>]]></content>
        <author>
            <name>lucacasonato</name>
            <email>lucacasonato@noreply.github.com</email>
            <uri>https://github.com/lucacasonato</uri>
        </author>
        <published>2025-02-07T10:42:01.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Allow cookie related headers in outgoing requests]]></title>
        <id>https://github.com/wintercg/fetch-workstream/issues/3</id>
        <link href="https://github.com/wintercg/fetch-workstream/issues/3"/>
        <updated>2025-02-07T10:40:54.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/7829205?u=280fa15bf97605fa9a7a1d331327485daaad7871&v=4" width="64" height="64" alt=""/><br/><p dir="auto">The <code class="notranslate">cookie</code> and <code class="notranslate">cookie2</code> are stripped from outgoing requests when set by the user on the web. For servers, this does not make sense because they do not have a cookie jar.</p>
<p dir="auto">We should allow setting these headers.</p>
<p dir="auto">The outbound <code class="notranslate">set-cookie</code> header is disallowed only because of technical difficulty with implementation in browsers - we could keep this disallowed, or allow it - it does not matter much I think.</p>]]></content>
        <author>
            <name>lucacasonato</name>
            <email>lucacasonato@noreply.github.com</email>
            <uri>https://github.com/lucacasonato</uri>
        </author>
        <published>2025-02-07T10:40:54.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Allowing various anti-spoofing headers for outgoing requests]]></title>
        <id>https://github.com/wintercg/fetch-workstream/issues/2</id>
        <link href="https://github.com/wintercg/fetch-workstream/issues/2"/>
        <updated>2025-02-07T14:06:04.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/7829205?u=280fa15bf97605fa9a7a1d331327485daaad7871&v=4" width="64" height="64" alt=""/><br/><p dir="auto">In the browser, <code class="notranslate">accept-charset</code>, <code class="notranslate">date</code>, <code class="notranslate">dnt</code>, <code class="notranslate">origin</code>, <code class="notranslate">referer</code>, <code class="notranslate">via</code>, <code class="notranslate">proxy-*</code>, <code class="notranslate">sec-*</code>, <code class="notranslate">x-http-method</code>, <code class="notranslate">x-http-method-override</code>, and <code class="notranslate">x-method-override</code> are disallowed because they should not be spoofable by users.</p>
<p dir="auto">On the server however, these are not security sensitive, so they do not have to be stripped from outgoing requests.</p>]]></content>
        <author>
            <name>lucacasonato</name>
            <email>lucacasonato@noreply.github.com</email>
            <uri>https://github.com/lucacasonato</uri>
        </author>
        <published>2025-02-07T10:36:12.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Tracking issue]]></title>
        <id>https://github.com/wintercg/fetch-workstream/issues/1</id>
        <link href="https://github.com/wintercg/fetch-workstream/issues/1"/>
        <updated>2025-02-07T10:42:48.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/7829205?u=280fa15bf97605fa9a7a1d331327485daaad7871&v=4" width="64" height="64" alt=""/><br/><p dir="auto">This issue links out to all the different parts of the spec that we need to investigate changes in (that we have found so far):</p>
<ul dir="auto">
<li>Allowed request headers
<ul dir="auto">
<li><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2837819735" data-permission-text="Title is private" data-url="https://github.com/wintercg/fetch-workstream/issues/2" data-hovercard-type="issue" data-hovercard-url="/wintercg/fetch-workstream/issues/2/hovercard" href="https://github.com/wintercg/fetch-workstream/issues/2">#2</a></li>
<li><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2837829918" data-permission-text="Title is private" data-url="https://github.com/wintercg/fetch-workstream/issues/3" data-hovercard-type="issue" data-hovercard-url="/wintercg/fetch-workstream/issues/3/hovercard" href="https://github.com/wintercg/fetch-workstream/issues/3">#3</a></li>
<li>All other headers should stay forbidden:
<ul dir="auto">
<li><code class="notranslate">accept-encoding</code> is related to auto-decompression, see below</li>
<li><code class="notranslate">keep-alive</code>, <code class="notranslate">transfer-encoding</code>, <code class="notranslate">TE</code> are HTTP/1.1 specific headers that are managed by the underlying HTTP stack itself</li>
<li><code class="notranslate">trailers</code> are not supported in fetch yet (see below)</li>
<li><code class="notranslate">upgrade</code>, as there is no upgrade mechanism in fetch (see below)</li>
</ul>
</li>
</ul>
</li>
<li>Allowed response headers
<ul dir="auto">
<li><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2837832206" data-permission-text="Title is private" data-url="https://github.com/wintercg/fetch-workstream/issues/4" data-hovercard-type="issue" data-hovercard-url="/wintercg/fetch-workstream/issues/4/hovercard" href="https://github.com/wintercg/fetch-workstream/issues/4">#4</a></li>
</ul>
</li>
<li><code class="notranslate">content-encoding</code> / <code class="notranslate">content-length</code> header sanitization after auto-decompression of the body
<ul dir="auto">
<li><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="2052984038" data-permission-text="Title is private" data-url="https://github.com/whatwg/fetch/issues/1729" data-hovercard-type="issue" data-hovercard-url="/whatwg/fetch/issues/1729/hovercard" href="https://github.com/whatwg/fetch/issues/1729">whatwg/fetch#1729</a></li>
</ul>
</li>
</ul>
<p dir="auto">There are also some features we have identified as possibly being useful:</p>
<ul dir="auto">
<li>Trailers</li>
<li>HTTP Upgrade API</li>
<li>Letting users set <code class="notranslate">content-length</code> for HTTP streams</li>
<li>API to receive interim responses (100 / 101 status code)</li>
<li>Allowing async iterables in request / response bodies</li>
<li>Disabling automatic response body decompression</li>
</ul>]]></content>
        <author>
            <name>lucacasonato</name>
            <email>lucacasonato@noreply.github.com</email>
            <uri>https://github.com/lucacasonato</uri>
        </author>
        <published>2025-02-07T10:34:19.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Runtime's own key resolution should be at least somewhat defined]]></title>
        <id>https://github.com/wintercg/runtime-keys/issues/18</id>
        <link href="https://github.com/wintercg/runtime-keys/issues/18"/>
        <updated>2024-11-08T15:17:53.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/241506?u=13324b3ac27dc54cdde3ac635d567d0d96b88876&v=4" width="64" height="64" alt=""/><br/><p dir="auto">This is very much related to <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1668941156" data-permission-text="Title is private" data-url="https://github.com/wintercg/runtime-keys/issues/5" data-hovercard-type="issue" data-hovercard-url="/wintercg/runtime-keys/issues/5/hovercard" href="https://github.com/wintercg/runtime-keys/issues/5">#5</a>, it highlights its importance and issues in the module ecosystem stemming from runtimes such as Bun and Deno pretending to be Node.js</p>
<p dir="auto">From the very <a href="https://runtime-keys.proposal.wintercg.org/#example-usage" rel="nofollow">example in the proposal</a></p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&quot;exports&quot;: {
    &quot;node&quot;: &quot;./dist/node/index.js&quot;,
    &quot;deno&quot;: &quot;./dist/deno/index.js&quot;
},"><pre class="notranslate"><span class="pl-s">"exports"</span>: <span class="pl-kos">{</span>
    <span class="pl-s">"node"</span>: <span class="pl-s">"./dist/node/index.js"</span><span class="pl-kos">,</span>
    <span class="pl-s">"deno"</span>: <span class="pl-s">"./dist/deno/index.js"</span>
<span class="pl-kos">}</span><span class="pl-kos">,</span></pre></div>
<p dir="auto">or an extended one</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&quot;exports&quot;: {
    &quot;node&quot;: &quot;./dist/node/index.js&quot;,
    &quot;deno&quot;: &quot;./dist/deno/index.js&quot;,
    &quot;bun&quot;: &quot;./dist/bun/index.js&quot;
},"><pre class="notranslate"><span class="pl-s">"exports"</span>: <span class="pl-kos">{</span>
    <span class="pl-s">"node"</span>: <span class="pl-s">"./dist/node/index.js"</span><span class="pl-kos">,</span>
    <span class="pl-s">"deno"</span>: <span class="pl-s">"./dist/deno/index.js"</span><span class="pl-kos">,</span>
    <span class="pl-s">"bun"</span>: <span class="pl-s">"./dist/bun/index.js"</span>
<span class="pl-kos">}</span><span class="pl-kos">,</span></pre></div>
<p dir="auto">While lacking resolution for <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1668941156" data-permission-text="Title is private" data-url="https://github.com/wintercg/runtime-keys/issues/5" data-hovercard-type="issue" data-hovercard-url="/wintercg/runtime-keys/issues/5/hovercard" href="https://github.com/wintercg/runtime-keys/issues/5">#5</a> and at least some prescribed lookup behaviour one would mistakenly think that the following means "everything but node loads from the webapi dist".</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&quot;exports&quot;: {
    &quot;node&quot;: &quot;./dist/node/index.js&quot;,
    &quot;default&quot;: &quot;./dist/webapi/index.js&quot;
},"><pre class="notranslate"><span class="pl-s">"exports"</span>: <span class="pl-kos">{</span>
    <span class="pl-s">"node"</span>: <span class="pl-s">"./dist/node/index.js"</span><span class="pl-kos">,</span>
    <span class="pl-s">"default"</span>: <span class="pl-s">"./dist/webapi/index.js"</span>
<span class="pl-kos">}</span><span class="pl-kos">,</span></pre></div>
<p dir="auto">Unfortunately that is not the case. Only Node.js correctly loads its intended export, while both Bun and Deno load "node" <strong>in all three examples above</strong> because of their compatibility beliefs and undescribed key order matching (all runtimes just look from top to bottom for a first hit).</p>
<p dir="auto">I believe the proposal needs <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1668941156" data-permission-text="Title is private" data-url="https://github.com/wintercg/runtime-keys/issues/5" data-hovercard-type="issue" data-hovercard-url="/wintercg/runtime-keys/issues/5/hovercard" href="https://github.com/wintercg/runtime-keys/issues/5">#5</a> combined with at least some text around how the keys are to be used.</p>
<p dir="auto">For example:</p>
<ul dir="auto">
<li>add "wintercg" or similar which effectively behaves as "default" does in the Node.js resolution algorithm</li>
<li>prescribe that runtimes must first look for their own key, then wintercg/default, and only then fallback on proprietary resolution algorithms</li>
</ul>
<p dir="auto">The alternative (today's behaviour) is that module authors need to maintain an ever growing list of keys in their package.json on the offchance that a new runtime is added that inherits from Deno or Bun in that they believe they can work with "node" exports</p>]]></content>
        <author>
            <name>panva</name>
            <email>panva@noreply.github.com</email>
            <uri>https://github.com/panva</uri>
        </author>
        <published>2024-10-31T07:52:38.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Detect common API vs browser]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/77</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/77"/>
        <updated>2024-10-30T18:52:52.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/567540?u=8c4489cd158bb1a7fffff338fc832359a113955e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Some code that runs in either the browser or a non-browser environment may have dedicated code paths for each, e.g. because certain code isn't expected to work- or to be exposed in browsers (or vice versa). The only API that is exposed in the minimum common API appears to be <code class="notranslate">navigator.userAgent</code> and it looks fragile when it comes to detecting browser vs non-browser environments.</p>
<p dir="auto">Are there plans to have a clear signal that can be used to detect the presence of the minimum common API?</p>]]></content>
        <author>
            <name>jkrems</name>
            <email>jkrems@noreply.github.com</email>
            <uri>https://github.com/jkrems</uri>
        </author>
        <published>2024-10-28T17:44:10.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[navigator.userAgent and User-Agent]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/76</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/76"/>
        <updated>2024-10-24T00:17:28.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/567540?u=8c4489cd158bb1a7fffff338fc832359a113955e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">The current spec text seems ambiguous so I was interested in the semantics: it links to the HTML spec for userAgent which says that the value is used as the default value for the User-Agent header. Is that true for the property here as well? Will fetch() by default use that value?</p>]]></content>
        <author>
            <name>jkrems</name>
            <email>jkrems@noreply.github.com</email>
            <uri>https://github.com/jkrems</uri>
        </author>
        <published>2024-10-24T00:17:28.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Considering the File System API]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/73</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/73"/>
        <updated>2024-07-03T01:57:04.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/8225977?u=ebf8bbc30918fe9c36833005bebc027a65984f34&v=4" width="64" height="64" alt=""/><br/><p dir="auto">The File System API is a relatively recent web standard, now implemented in all browsers, that allows accessing and modifying files in the file system. All browsers allow access through this API to a virtual filesystem, unique to a page's origin, through <a href="https://developer.mozilla.org/en-US/docs/Web/API/StorageManager/getDirectory" rel="nofollow"><code class="notranslate">await navigator.storage.getDirectory()</code></a>, that you can't go outside of.</p>
<p dir="auto">However, Chromium extends this by providing additional APIs (such as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showOpenFilePicker" rel="nofollow"><code class="notranslate">window.showOpenFilePicker()</code></a>) that give you access to arbitrary files and directories in the file system. Although other browsers are opposed to implementing these APIs because of safety and privacy concerns, this is not an issue for server-side runtimes.</p>
<p dir="auto">I have heard that this API is not a great fit for server-side environments, but (as someone who hasn't looked in depth at the API and considered it) those concerns are not clear to me. So I opened this issue to have a place to discuss what it's missing, whether we can work with WHATWG to fix that, and also to discuss WinterCG extensions similar to <code class="notranslate">showOpenFilePicker()</code>.</p>]]></content>
        <author>
            <name>andreubotella</name>
            <email>andreubotella@noreply.github.com</email>
            <uri>https://github.com/andreubotella</uri>
        </author>
        <published>2024-07-02T08:55:34.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Requesting a position on the Observable API]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/72</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/72"/>
        <updated>2024-06-17T07:10:14.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/9669289?u=1dba106891d6c062871da687242942532ea26005&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Hi there, at the <a href="https://webengineshackfest.org/" rel="nofollow">Web Engines Hackfest</a> I raised the question of how to get a WinterCG "position" about new web API proposals. Along with others, <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/littledan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/littledan">@littledan</a> mentioned that for now, filing issues against this repository will do.</p>
<p dir="auto">I'd like to get Winter's position on the Observable API, as proposed in <a href="https://github.com/WICG/observable">https://github.com/WICG/observable</a>. Observables are a <a href="https://github.com/whatwg/dom/issues/544" data-hovercard-type="issue" data-hovercard-url="/whatwg/dom/issues/544/hovercard">long-awaited</a> and <a href="https://foolip.github.io/spec-reactions/" rel="nofollow">highly desired</a> ergonomic improvement for event handling.</p>
<p dir="auto">I'll admit I'd still like to do my research on where exactly the line should be drawn between Observables and Signals in terms of their usage (at the moment I know almost nothing about Signals except for what some people described to me in person). But still it would be good to get a gut check on this proposal by experts over here, sooner than later. Thanks!</p>]]></content>
        <author>
            <name>domfarolino</name>
            <email>domfarolino@noreply.github.com</email>
            <uri>https://github.com/domfarolino</uri>
        </author>
        <published>2024-06-06T13:43:19.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Service worker runtime environment]]></title>
        <id>https://github.com/wintercg/runtime-keys/issues/13</id>
        <link href="https://github.com/wintercg/runtime-keys/issues/13"/>
        <updated>2024-04-08T10:51:57.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/5588957?u=fb4173ce4f07a2a10a27f53afb59de4055ec0ca4&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Can browser service worker runtime be included?</p>
<p dir="auto">Hono can run in Node, Deno, Bun, Cloudflare Workers, Pages, and can also run in a service worker to power an offline web app.</p>
<p dir="auto">I'd like to see more things target/support service workers too (e.g. Next.js, Deno Fresh, and HonoX could all be made to work in various runtime environments and could then easily be ran in a service worker).</p>]]></content>
        <author>
            <name>mfulton26</name>
            <email>mfulton26@noreply.github.com</email>
            <uri>https://github.com/mfulton26</uri>
        </author>
        <published>2024-04-08T10:29:10.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Cross-Runtime Testing APIs?]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/68</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/68"/>
        <updated>2024-03-02T05:14:42.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/1935696?u=d4da91ea9b820da475036cd6fec79943b2c06775&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Since Node.js, Bun and Deno offer different APIs (<a href="https://nodejs.org/api/test.html#test-runner" rel="nofollow"><code class="notranslate">node:test</code></a>, <a href="https://bun.sh/docs/test/writing" rel="nofollow"><code class="notranslate">bun:test</code></a>, <a href="https://examples.deno.land/writing-tests" rel="nofollow"><code class="notranslate">Deno.test</code></a>) but have many similarities, would it make sense to have a set of specced cross-platform testing APIs?</p>
<h2 dir="auto">Motivating Example</h2>
<p dir="auto"><code class="notranslate">runtime:</code> prefix, in the style of Node.js or Bun:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import { test } from 'runtime:test';

test('2 + 2', () =&gt; {
  expect(2 + 2).toBe(4);
});"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">test</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'runtime:test'</span><span class="pl-kos">;</span>

<span class="pl-en">test</span><span class="pl-kos">(</span><span class="pl-s">'2 + 2'</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">expect</span><span class="pl-kos">(</span><span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">toBe</span><span class="pl-kos">(</span><span class="pl-c1">4</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">Or, Deno-style global:</p>
<div class="highlight highlight-source-ts notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="Runtime.test(&quot;assert works correctly&quot;, () =&gt; {
  assert(true);
  assertEquals(1, 1);
});

// Using existing global:
globalThis.test(&quot;assert works correctly&quot;, () =&gt; {
  assert(true);
  assertEquals(1, 1);
});"><pre class="notranslate"><span class="pl-v">Runtime</span><span class="pl-kos">.</span><span class="pl-en">test</span><span class="pl-kos">(</span><span class="pl-s">"assert works correctly"</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">assert</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-en">assertEquals</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Using existing global:</span>
<span class="pl-s1">globalThis</span><span class="pl-kos">.</span><span class="pl-en">test</span><span class="pl-kos">(</span><span class="pl-s">"assert works correctly"</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-en">assert</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-en">assertEquals</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">This was originally inspired by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/nzakas/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nzakas">@nzakas</a>'s tweet here:</p>
<blockquote>
<p dir="auto">What I want: To write JavaScript tests once and be able to run them across Node.js, Bun, and Deno.</p>
<p dir="auto">Problem: Bun and Deno have built-in test runners you have to import from to run tests. I use Mocha. This doesn't work.</p>
<p dir="auto">Solution: ???</p>
</blockquote>
<p dir="auto">Source: <a href="https://twitter.com/slicknet/status/1762264774166085937" rel="nofollow">https://twitter.com/slicknet/status/1762264774166085937</a></p>
<p dir="auto"><a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/CanadaHonk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/CanadaHonk">@CanadaHonk</a> rightly mentions that, while there are similarities, there are probably challenges creating a spec:</p>
<blockquote>
<p dir="auto">most test framework APIs are pretty similar?</p>
<p dir="auto">probably hard to spec due to sandbox/isolation/etc</p>
</blockquote>
<p dir="auto">Source: <a href="https://twitter.com/CanadaHonk/status/1762417370893516929" rel="nofollow">https://twitter.com/CanadaHonk/status/1762417370893516929</a></p>
<h2 dir="auto">Alternatives Considered</h2>
<h3 dir="auto">Separate Package</h3>
<p dir="auto">Instead of something built into the standard library of multiple runtimes, use a separate package (either like Vitest, including testing features of its own, or a wrapper package).</p>
<p dir="auto">Downsides:</p>
<ol dir="auto">
<li>Doesn't work out of the box or with zero dependencies</li>
<li>Downloading and maintaining another package in <code class="notranslate">devDependencies</code></li>
</ol>]]></content>
        <author>
            <name>karlhorky</name>
            <email>karlhorky@noreply.github.com</email>
            <uri>https://github.com/karlhorky</uri>
        </author>
        <published>2024-02-27T10:10:33.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Should environment variable values be normalized?]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/17</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/17"/>
        <updated>2024-03-14T01:26:30.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/19228318?u=eea29901f58d6357f0fc2992747d0b4b80d23c8e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Eg: <code class="notranslate">'0'</code> -&gt; <code class="notranslate">0</code>, <code class="notranslate">'false'</code> -&gt; <code class="notranslate">false</code>. Suggested by <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/nicolo-ribaudo/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicolo-ribaudo">@nicolo-ribaudo</a></p>]]></content>
        <author>
            <name>CanadaHonk</name>
            <email>CanadaHonk@noreply.github.com</email>
            <uri>https://github.com/CanadaHonk</uri>
        </author>
        <published>2024-02-11T21:35:18.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[WebSocket]]></title>
        <id>https://github.com/wintercg/proposal-minimum-common-api/issues/66</id>
        <link href="https://github.com/wintercg/proposal-minimum-common-api/issues/66"/>
        <updated>2024-02-09T09:48:37.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/42794878?u=c2da6d9d9cc86ff6ae7bd4c089f2cdbb9ff01a84&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Cloudflare workers, Deno, node, bun all have it in some capacity. But it's also extremely limited and there is little incentive from browsers to change it.</p>
<p dir="auto">Node supports passing a dictionary as the second argument, ie. for setting custom headers or undici dispatchers (which allows for proxying, etc.). If this could be standardized it'd be great.</p>
<p dir="auto"><a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1599378606" data-permission-text="Title is private" data-url="https://github.com/whatwg/websockets/issues/42" data-hovercard-type="issue" data-hovercard-url="/whatwg/websockets/issues/42/hovercard" href="https://github.com/whatwg/websockets/issues/42">whatwg/websockets#42</a><br>
<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="1147048320" data-permission-text="Title is private" data-url="https://github.com/whatwg/websockets/issues/16" data-hovercard-type="issue" data-hovercard-url="/whatwg/websockets/issues/16/hovercard?comment_id=881547333&amp;comment_type=issue_comment" href="https://github.com/whatwg/websockets/issues/16#issuecomment-881547333">whatwg/websockets#16 (comment)</a></p>]]></content>
        <author>
            <name>KhafraDev</name>
            <email>KhafraDev@noreply.github.com</email>
            <uri>https://github.com/KhafraDev</uri>
        </author>
        <published>2024-02-09T04:01:26.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Write mini test suite?]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/16</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/16"/>
        <updated>2024-02-09T02:26:14.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/19228318?u=eea29901f58d6357f0fc2992747d0b4b80d23c8e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Further future thing, but would be very nice to have, especially for more low-level implementations like env atm.</p>]]></content>
        <author>
            <name>CanadaHonk</name>
            <email>CanadaHonk@noreply.github.com</email>
            <uri>https://github.com/CanadaHonk</uri>
        </author>
        <published>2024-02-09T02:26:14.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[How should exit hooks be added/removed?]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/15</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/15"/>
        <updated>2024-03-07T00:27:32.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/19228318?u=eea29901f58d6357f0fc2992747d0b4b80d23c8e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Since we can exit, we should likely add exit hooks as <a href="https://github.com/CanadaHonk/proposal-cli-api/issues/1#issuecomment-1921542301" data-hovercard-type="issue" data-hovercard-url="/wintercg/proposal-cli-api/issues/1/hovercard">suggested by @lucacasonato</a>. How should they be added/removed? (also todo bikeshed exit hook or exit listener or ...)</p>
<p dir="auto">Just like this?</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="const hook = () =&gt; console.log('Goodbye!');
CLI.addExitHook(hook);
// CLI.removeExitHook(hook);"><pre class="notranslate"><span class="pl-k">const</span> <span class="pl-en">hook</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">'Goodbye!'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c1">CLI</span><span class="pl-kos">.</span><span class="pl-en">addExitHook</span><span class="pl-kos">(</span><span class="pl-en">hook</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// CLI.removeExitHook(hook);</span></pre></div>]]></content>
        <author>
            <name>CanadaHonk</name>
            <email>CanadaHonk@noreply.github.com</email>
            <uri>https://github.com/CanadaHonk</uri>
        </author>
        <published>2024-02-09T00:37:56.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Write spec bikeshed file]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/14</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/14"/>
        <updated>2024-02-08T21:03:02.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/19228318?u=eea29901f58d6357f0fc2992747d0b4b80d23c8e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Since we now have a mini ES-like thing taking up most the explainer, we should probably start an actual spec bikeshed file sometime soon. Maybe once it is under WinterCG?</p>]]></content>
        <author>
            <name>CanadaHonk</name>
            <email>CanadaHonk@noreply.github.com</email>
            <uri>https://github.com/CanadaHonk</uri>
        </author>
        <published>2024-02-08T21:03:01.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Terminal metadata - link support?]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/12</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/12"/>
        <updated>2024-02-19T15:58:55.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/32498324?u=6ff39af834311a2dbeefc3c3071dde7eeb6d5a0b&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Some terminals support printing interactive hyperlinks and some don't. It could be useful to expose this ability?</p>]]></content>
        <author>
            <name>lukewarlow</name>
            <email>lukewarlow@noreply.github.com</email>
            <uri>https://github.com/lukewarlow</uri>
        </author>
        <published>2024-02-07T11:53:03.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[Runtime outreach]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/11</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/11"/>
        <updated>2024-02-08T19:22:12.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/19228318?u=eea29901f58d6357f0fc2992747d0b4b80d23c8e&v=4" width="64" height="64" alt=""/><br/><h3 dir="auto">"The three"</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Node: <a href="https://github.com/nodejs/node/issues/51706" data-hovercard-type="issue" data-hovercard-url="/nodejs/node/issues/51706/hovercard">TSC issue requesting comments</a></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Deno: Marking this as essentially done thanks to <a class="user-mention notranslate" data-hovercard-type="user" data-hovercard-url="/users/lucacasonato/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/lucacasonato">@lucacasonato</a></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""> Bun: Some feedback from <a class="user-mention notranslate" data-hovercard-type="organization" data-hovercard-url="/orgs/paperdave/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/paperdave">@paperdave</a> (ty!)</li>
</ul>
<h3 dir="auto">Edge runtimes</h3>
<p dir="auto">Not sure, this doesn't really effect them?</p>
<h3 dir="auto">Smaller runtimes</h3>
<p dir="auto">Could be nice, probably low priority though?</p>]]></content>
        <author>
            <name>CanadaHonk</name>
            <email>CanadaHonk@noreply.github.com</email>
            <uri>https://github.com/CanadaHonk</uri>
        </author>
        <published>2024-02-07T01:04:09.000Z</published>
    </entry>
    <entry>
        <title type="html"><![CDATA[How should terminal metadata be exposed?]]></title>
        <id>https://github.com/wintercg/proposal-cli-api/issues/9</id>
        <link href="https://github.com/wintercg/proposal-cli-api/issues/9"/>
        <updated>2024-05-15T03:10:03.000Z</updated>
        <content type="html"><![CDATA[<img src="https://avatars.githubusercontent.com/u/19228318?u=eea29901f58d6357f0fc2992747d0b4b80d23c8e&v=4" width="64" height="64" alt=""/><br/><p dir="auto">Terminal metadata idea from <a href="https://github.com/CanadaHonk/proposal-cli-api/issues/1#issuecomment-1921612081" data-hovercard-type="issue" data-hovercard-url="/wintercg/proposal-cli-api/issues/1/hovercard">this #1 comment</a>.</p>
<ul dir="auto">
<li>Should we have a parent object (eg <code class="notranslate">CLI.terminal.noColor</code>) or bare in the namespace (eg <code class="notranslate">CLI.noColor</code>)?</li>
<li>Functions (eg <code class="notranslate">CLI.terminal.noColor()</code>) or getters (eg <code class="notranslate">CLI.terminal.noColor</code>)?</li>
<li>Interactivity:
<ul dir="auto">
<li>Potential names: <code class="notranslate">interactive</code>, <code class="notranslate">isInteractive</code>, <code class="notranslate">interactivity</code>, <code class="notranslate">nonInteractive</code>, <code class="notranslate">notInteractive</code>, <code class="notranslate">tty</code>, <code class="notranslate">isTty</code>, <code class="notranslate">isTTY</code>, <code class="notranslate">terminal</code>, <code class="notranslate">isTerminal</code>, <code class="notranslate">inTerminal</code></li>
<li>Deno used to have a <code class="notranslate">isatty(...)</code> function, but now is moving to <code class="notranslate">isTerminal</code>.</li>
</ul>
</li>
<li>No color:
<ul dir="auto">
<li>Potential names: <code class="notranslate">noColor</code>, <code class="notranslate">color</code>, <code class="notranslate">colorful</code>, <code class="notranslate">hasColor</code>, <code class="notranslate">shouldColor</code></li>
<li>We should probably just use <code class="notranslate">noColor</code> as it is essentially an opt-out preference; <code class="notranslate">color</code> could imply the user <em>wants</em> color which could not be true (rather than <code class="notranslate">NO_COLOR</code> stating the user explicitly does <em>not want</em> color). Also, this would then share the name of the <a href="https://no-color.org/" rel="nofollow">environment variable "standard"</a>.</li>
<li>Only <a href="https://deno.land/api?s=Deno.noColor" rel="nofollow">Deno exposes just this (<code class="notranslate">Deno.noColor</code>)</a> afaik, other runtimes you have to handle it yourself (eg <code class="notranslate">!!process.env.NO_COLOR</code>).</li>
</ul>
</li>
</ul>]]></content>
        <author>
            <name>CanadaHonk</name>
            <email>CanadaHonk@noreply.github.com</email>
            <uri>https://github.com/CanadaHonk</uri>
        </author>
        <published>2024-02-06T23:14:42.000Z</published>
    </entry>
</feed>